WEBVTT
Kind: captions
Language: zh-CN

00:00:00.000 --> 00:00:04.129
之前 本课介绍了如何用小提琴图和箱线图

00:00:04.129 --> 00:00:08.365
来描绘数值变量和分类变量之间的关系

00:00:08.365 --> 00:00:11.949
现在我们要用另一种替代方法

00:00:11.949 --> 00:00:16.484
根据分类变量拆分数据 从而对数值变量的直方图进行分面处理

00:00:16.484 --> 00:00:22.015
要完成分面 我们使用 seaborn 的 FacetGrid 类对象

00:00:22.015 --> 00:00:25.870
我要设置两个参数来创建 FacetGrid 对象

00:00:25.870 --> 00:00:30.520
一个是 data 像之前一样将 fuel_econ DataFrame 赋给该参数

00:00:30.519 --> 00:00:34.244
另一个是 col 将列名 Vclass 赋给该参数

00:00:34.244 --> 00:00:37.524
这样一来 无论我们要分面什么图表

00:00:37.524 --> 00:00:41.854
图表都会按汽车类型拆分成若干子图

00:00:41.854 --> 00:00:45.500
接着 指明各分面要生成的图表种类

00:00:45.500 --> 00:00:49.560
为此 使用对象 FacetGrid 的函数 map

00:00:49.560 --> 00:00:52.035
第一个参数是绘图函数

00:00:52.034 --> 00:00:53.974
即直方图 hist

00:00:53.975 --> 00:00:57.939
第二个参数是要绘制的 x 轴变量名

00:00:57.939 --> 00:01:00.019
也就是 comb

00:01:00.020 --> 00:01:03.515
注意 不要设 x = comb

00:01:03.515 --> 00:01:06.579
否则分面无法正确分组

00:01:06.579 --> 00:01:10.349
你可以看到 所有数据都按函数 hist 默认的分为十组

00:01:10.349 --> 00:01:14.434
但每个分面的坐标轴范围是一样的

00:01:14.435 --> 00:01:17.490
这有利于比较分面变量各组的频率

00:01:17.489 --> 00:01:21.924
与绘制变量各组的值

00:01:21.924 --> 00:01:24.289
我们来做些调整

00:01:24.290 --> 00:01:27.165
首先 在函数 map 里添加参数 bins

00:01:27.165 --> 00:01:30.010
使各分面的组相同

00:01:30.010 --> 00:01:33.609
接着 添加参数 col_wrap

00:01:33.609 --> 00:01:36.969
限制并排放置的分面数

00:01:36.969 --> 00:01:40.129
虽然这个数据集不要求这一步操作

00:01:40.129 --> 00:01:43.774
但如果要分面的变量类别很多 这一步就很实用了

00:01:43.775 --> 00:01:46.560
最后 我想说一下

00:01:46.560 --> 00:01:49.875
如果你不想固定各分面的轴范围 要怎么做

00:01:49.875 --> 00:01:53.590
在调用对象 FacetGrid 中设 sharey = False

00:01:53.590 --> 00:01:57.090
每个分面就能有自己的 y 轴范围了

00:01:57.090 --> 00:02:01.335
这样更方便你观察各类别的分布差异

00:02:01.334 --> 00:02:05.289
但也就无法比较各组的总频率了

00:02:05.290 --> 00:02:06.920
一不小心

00:02:06.920 --> 00:02:09.530
你会以为各类别的车辆数量差不多

00:02:09.530 --> 00:02:13.400
而事实可能并非如此

