<!-- udacimak v1.4.4 -->
<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <meta content="ie=edge" http-equiv="X-UA-Compatible"/>
  <title>
   Clustered Bar Charts
  </title>
  <link href="../assets/css/bootstrap.min.css" rel="stylesheet"/>
  <link href="../assets/css/plyr.css" rel="stylesheet"/>
  <link href="../assets/css/katex.min.css" rel="stylesheet"/>
  <link href="../assets/css/jquery.mCustomScrollbar.min.css" rel="stylesheet"/>
  <link href="../assets/css/styles.css" rel="stylesheet"/>
  <link href="../assets/img/udacimak.png" rel="shortcut icon" type="image/png">
  </link>
 </head>
 <body>
  <div class="wrapper">
   <nav id="sidebar">
    <div class="sidebar-header">
     <h3>
      Bivariate Exploration of Data
     </h3>
    </div>
    <ul class="sidebar-list list-unstyled CTAs">
     <li>
      <a class="article" href="../index.html">
       Back to Home
      </a>
     </li>
    </ul>
    <ul class="sidebar-list list-unstyled components">
     <li class="">
      <a href="01. Introduction.html">
       01. Introduction
      </a>
     </li>
     <li class="">
      <a href="02. Scatterplots and Correlation.html">
       02. Scatterplots and Correlation
      </a>
     </li>
     <li class="">
      <a href="03. Overplotting, Transparency, and Jitter.html">
       03. Overplotting, Transparency, and Jitter
      </a>
     </li>
     <li class="">
      <a href="04. Heat Maps.html">
       04. Heat Maps
      </a>
     </li>
     <li class="">
      <a href="05. Scatterplot Practice.html">
       05. Scatterplot Practice
      </a>
     </li>
     <li class="">
      <a href="06. Violin Plots.html">
       06. Violin Plots
      </a>
     </li>
     <li class="">
      <a href="07. Box Plots.html">
       07. Box Plots
      </a>
     </li>
     <li class="">
      <a href="08. Violin and Box Plot Practice.html">
       08. Violin and Box Plot Practice
      </a>
     </li>
     <li class="">
      <a href="09. Clustered Bar Charts.html">
       09. Clustered Bar Charts
      </a>
     </li>
     <li class="">
      <a href="10. Categorical Plot Practice.html">
       10. Categorical Plot Practice
      </a>
     </li>
     <li class="">
      <a href="11. Faceting.html">
       11. Faceting
      </a>
     </li>
     <li class="">
      <a href="12. Adaptation of Univariate Plots.html">
       12. Adaptation of Univariate Plots
      </a>
     </li>
     <li class="">
      <a href="13. Line Plots.html">
       13. Line Plots
      </a>
     </li>
     <li class="">
      <a href="14. Additional Plot Practice.html">
       14. Additional Plot Practice
      </a>
     </li>
     <li class="">
      <a href="15. Lesson Summary.html">
       15. Lesson Summary
      </a>
     </li>
     <li class="">
      <a href="16. Extra Q-Q Plots.html">
       16. Extra: Q-Q Plots
      </a>
     </li>
     <li class="">
      <a href="17. Extra Swarm Plots.html">
       17. Extra: Swarm Plots
      </a>
     </li>
     <li class="">
      <a href="18. Extra Rug and Strip Plots.html">
       18. Extra: Rug and Strip Plots
      </a>
     </li>
     <li class="">
      <a href="19. Extra Stacked Plots.html">
       19. Extra: Stacked Plots
      </a>
     </li>
     <li class="">
      <a href="20. Extra Ridgeline Plots.html">
       20. Extra: Ridgeline Plots
      </a>
     </li>
    </ul>
    <ul class="sidebar-list list-unstyled CTAs">
     <li>
      <a class="article" href="../index.html">
       Back to Home
      </a>
     </li>
    </ul>
   </nav>
   <div id="content">
    <header class="container-fluild header">
     <div class="container">
      <div class="row">
       <div class="col-12">
        <div class="align-items-middle">
         <button class="btn btn-toggle-sidebar" id="sidebarCollapse" type="button">
          <div>
          </div>
          <div>
          </div>
          <div>
          </div>
         </button>
         <h1 style="display: inline-block">
          09. Clustered Bar Charts
         </h1>
        </div>
       </div>
      </div>
     </div>
    </header>
    <main class="container">
     <div class="row">
      <div class="col-12">
       <div class="ud-atom">
        <h3>
         <p>
          L4 091 Clustered Bar Charts V4
         </p>
        </h3>
        <video controls="">
         <source src="09. L4 091 Clustered Bar Charts V4-0rFp55TtEJM.mp4" type="video/mp4"/>
         <track default="true" kind="subtitles" label="en" src="09. L4 091 Clustered Bar Charts V4-0rFp55TtEJM.en.vtt" srclang="en"/>
         <track default="false" kind="subtitles" label="BR" src="09. L4 091 Clustered Bar Charts V4-0rFp55TtEJM.pt-BR.vtt" srclang="BR"/>
         <track default="false" kind="subtitles" label="CN" src="09. L4 091 Clustered Bar Charts V4-0rFp55TtEJM.zh-CN.vtt" srclang="CN"/>
        </video>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <hr/>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
         <p>
          Data Vis L4 C09 V1
         </p>
        </h3>
        <video controls="">
         <source src="09. Data Vis L4 C09 V1-OnzWhpgM9Vs.mp4" type="video/mp4"/>
         <track default="true" kind="subtitles" label="en" src="09. Data Vis L4 C09 V1-OnzWhpgM9Vs.en.vtt" srclang="en"/>
         <track default="false" kind="subtitles" label="BR" src="09. Data Vis L4 C09 V1-OnzWhpgM9Vs.pt-BR.vtt" srclang="BR"/>
         <track default="false" kind="subtitles" label="CN" src="09. Data Vis L4 C09 V1-OnzWhpgM9Vs.zh-CN.vtt" srclang="CN"/>
        </video>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <hr/>
         <h2 id="clustered-bar-charts">
          Clustered Bar Charts
         </h2>
         <p>
          To depict the relationship between two categorical variables, we can extend the univariate bar chart seen in the previous lesson into a
          <strong>
           clustered bar chart
          </strong>
          . Like a standard bar chart, we still want to depict the count of data points in each group, but each group is now a combination of labels on two variables. So we want to organize the bars into an order that makes the plot easy to interpret. In a clustered bar chart, bars are organized into clusters based on levels of the first variable, and then bars are ordered consistently across the second variable within each cluster. This is easiest to see with an example, using seaborn's
          <a href="https://seaborn.pydata.org/generated/seaborn.countplot.html" rel="noopener noreferrer" target="_blank">
           <code>
            countplot
           </code>
          </a>
          function. To take the plot from univariate to bivariate, we add the second variable to be plotted under the "hue" argument:
         </p>
         <pre><code class="python language-python">sb.countplot(data = df, x = 'cat_var1', hue = 'cat_var2')</code></pre>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <figure class="figure">
          <img alt="" class="img img-fluid" src="img/l4-c09-clusteredbar1.png"/>
          <figcaption class="figure-caption">
          </figcaption>
         </figure>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <p>
          The first categorical variable is depicted by broad x-position (Control, Experiment A, Experiment B). Within each of these groups, three bars are plotted, one for each level of the second categorical variable (Low, Medium, High). Color differentiates each level, and is documented with the legend in the upper-right corner of the plot. The plot tells us that the three "cat_var1" groups are fairly balanced in frequencies across the "cat_var2" levels, though the "Experiment A" group appears to have slighly lower counts of "Medium" points (orange central bar) compared to the other two groups.
         </p>
         <p>
          The legend position in this example is a bit distracting, however. We can use an
          <a href="https://matplotlib.org/api/axes_api.html" rel="noopener noreferrer" target="_blank">
           Axes method
          </a>
          to set the legend properties on the Axes object returned from
          <code>
           countplot
          </code>
          .
         </p>
         <pre><code class="python language-python">ax = sb.countplot(data = df, x = 'cat_var1', hue = 'cat_var2')
ax.legend(loc = 8, ncol = 3, framealpha = 1, title = 'cat_var2')</code></pre>
         <p>
          (Documentation:
          <a href="https://matplotlib.org/api/_as_gen/matplotlib.axes.Axes.legend.html" rel="noopener noreferrer" target="_blank">
           <code>
            Axes.legend
           </code>
          </a>
          )
         </p>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <figure class="figure">
          <img alt="" class="img img-fluid" src="img/l4-c09-clusteredbar2.png"/>
          <figcaption class="figure-caption">
          </figcaption>
         </figure>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <h2 id="alternative-approach-heat-map">
          Alternative Approach (Heat Map)
         </h2>
         <p>
          One alternative way of depicting the relationship between two categorical variables is through a heat map. Heat maps were introduced earlier as the 2-d version of a histogram; here, we're using them as the 2-d version of a bar chart. The seaborn function
          <a href="https://seaborn.pydata.org/generated/seaborn.heatmap.html" rel="noopener noreferrer" target="_blank">
           <code>
            heatmap
           </code>
          </a>
          is at home with this type of heat map implementation, but the input arguments are unlike most of the visualization functions that have been introduced in this course. Instead of providing the original dataframe, we need to summarize the counts into a matrix that will then be plotted.
         </p>
         <pre><code class="python language-python">ct_counts = df.groupby(['cat_var1', 'cat_var2']).size()
ct_counts = ct_counts.reset_index('count')
ct_counts = ct_counts.pivot(index = 'cat_var2', columns = 'cat_var1', values = 'count')</code></pre>
         <p>
          (Documentation:
          <a href="https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.reset_index.html" rel="noopener noreferrer" target="_blank">
           Series
           <code>
            reset_index
           </code>
          </a>
          ,
          <a href="https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.pivot.html" rel="noopener noreferrer" target="_blank">
           DataFrame
           <code>
            pivot
           </code>
          </a>
          )
         </p>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <figure class="figure">
          <img alt="" class="img img-fluid" src="img/l4-c09-clusteredbar3.png"/>
          <figcaption class="figure-caption">
          </figcaption>
         </figure>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <pre><code class="python language-python">sb.heatmap(ct_counts)</code></pre>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <figure class="figure">
          <img alt="" class="img img-fluid" src="img/l4-c09-clusteredbar4.png"/>
          <figcaption class="figure-caption">
          </figcaption>
         </figure>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <p>
          The heat map tells the same story as the clustered bar chart: the similar colors across the rows suggests that the "cat_var1" group sizes are similarly sized and distributed similarly across levels of "cat_var2". The Experiment A has slightly fewer counts of Medium-level observations, while Control has higher counts of High data points and Experiment B has slightly higher counts of Low points. Compared to the clustered bar chart, however, there is less precision interpreting the magnitude of differences. For this reason, we might want to add annotations to the plot to report counts within each cell.
         </p>
         <pre><code class="python language-python">sb.heatmap(ct_counts, annot = True, fmt = 'd')</code></pre>
         <p>
          <code>
           annot = True
          </code>
          makes it so annotations show up in each cell, but the default string formatting only goes to two digits of precision. Adding
          <code>
           fmt = 'd'
          </code>
          means that annotations will all be formatted as integers instead. You can use
          <code>
           fmt = '.0f'
          </code>
          if you have any cells with no counts, in order to account for NaNs.
         </p>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <figure class="figure">
          <img alt="" class="img img-fluid" src="img/l4-c09-clusteredbar5.png"/>
          <figcaption class="figure-caption">
          </figcaption>
         </figure>
        </div>
       </div>
       <div class="divider">
       </div>
      </div>
      <div class="col-12">
       <p class="text-right">
        <a class="btn btn-outline-primary mt-4" href="10. Categorical Plot Practice.html" role="button">
         Next Concept
        </a>
       </p>
      </div>
     </div>
    </main>
    <footer class="footer">
     <div class="container">
      <div class="row">
       <div class="col-12">
        <p class="text-center">
         udacity2.0 If you need the newest courses Plase add me wechat: udacity6
        </p>
       </div>
      </div>
     </div>
    </footer>
   </div>
  </div>
  <script src="../assets/js/jquery-3.3.1.min.js">
  </script>
  <script src="../assets/js/plyr.polyfilled.min.js">
  </script>
  <script src="../assets/js/bootstrap.min.js">
  </script>
  <script src="../assets/js/jquery.mCustomScrollbar.concat.min.js">
  </script>
  <script src="../assets/js/katex.min.js">
  </script>
  <script>
   // Initialize Plyr video players
    const players = Array.from(document.querySelectorAll('video')).map(p => new Plyr(p));

    // render math equations
    let elMath = document.getElementsByClassName('mathquill');
    for (let i = 0, len = elMath.length; i < len; i += 1) {
      const el = elMath[i];

      katex.render(el.textContent, el, {
        throwOnError: false
      });
    }

    // this hack will make sure Bootstrap tabs work when using Handlebars
    if ($('#question-tabs').length && $('#user-answer-tabs').length) {
      $("#question-tabs a.nav-link").on('click', function () {
        $("#question-tab-contents .tab-pane").hide();
        $($(this).attr("href")).show();
      });
      $("#user-answer-tabs a.nav-link").on('click', function () {
        $("#user-answer-tab-contents .tab-pane").hide();
        $($(this).attr("href")).show();
      });
    } else {
      $("a.nav-link").on('click', function () {
        $(".tab-pane").hide();
        $($(this).attr("href")).show();
      });
    }

    // side bar events
    $(document).ready(function () {
      $("#sidebar").mCustomScrollbar({
        theme: "minimal"
      });

      $('#sidebarCollapse').on('click', function () {
        $('#sidebar, #content').toggleClass('active');
        $('.collapse.in').toggleClass('in');
        $('a[aria-expanded=true]').attr('aria-expanded', 'false');
      });

      // scroll to first video on page loading
      if ($('video').length) {
        $('html,body').animate({ scrollTop: $('div.plyr').prev().offset().top});
      }

      // auto play first video: this may not work with chrome/safari due to autoplay policy
      if (players && players.length > 0) {
        players[0].play();
      }

      // scroll sidebar to current concept
      const currentInSideBar = $( "ul.sidebar-list.components li a:contains('09. Clustered Bar Charts')" )
      currentInSideBar.css( "text-decoration", "underline" );
      $("#sidebar").mCustomScrollbar('scrollTo', currentInSideBar);
    });
  </script>
 </body>
</html>
