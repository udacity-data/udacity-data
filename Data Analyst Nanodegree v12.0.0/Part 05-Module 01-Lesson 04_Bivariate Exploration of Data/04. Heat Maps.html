<!-- udacimak v1.4.4 -->
<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <meta content="ie=edge" http-equiv="X-UA-Compatible"/>
  <title>
   Heat Maps
  </title>
  <link href="../assets/css/bootstrap.min.css" rel="stylesheet"/>
  <link href="../assets/css/plyr.css" rel="stylesheet"/>
  <link href="../assets/css/katex.min.css" rel="stylesheet"/>
  <link href="../assets/css/jquery.mCustomScrollbar.min.css" rel="stylesheet"/>
  <link href="../assets/css/styles.css" rel="stylesheet"/>
  <link href="../assets/img/udacimak.png" rel="shortcut icon" type="image/png">
  </link>
 </head>
 <body>
  <div class="wrapper">
   <nav id="sidebar">
    <div class="sidebar-header">
     <h3>
      Bivariate Exploration of Data
     </h3>
    </div>
    <ul class="sidebar-list list-unstyled CTAs">
     <li>
      <a class="article" href="../index.html">
       Back to Home
      </a>
     </li>
    </ul>
    <ul class="sidebar-list list-unstyled components">
     <li class="">
      <a href="01. Introduction.html">
       01. Introduction
      </a>
     </li>
     <li class="">
      <a href="02. Scatterplots and Correlation.html">
       02. Scatterplots and Correlation
      </a>
     </li>
     <li class="">
      <a href="03. Overplotting, Transparency, and Jitter.html">
       03. Overplotting, Transparency, and Jitter
      </a>
     </li>
     <li class="">
      <a href="04. Heat Maps.html">
       04. Heat Maps
      </a>
     </li>
     <li class="">
      <a href="05. Scatterplot Practice.html">
       05. Scatterplot Practice
      </a>
     </li>
     <li class="">
      <a href="06. Violin Plots.html">
       06. Violin Plots
      </a>
     </li>
     <li class="">
      <a href="07. Box Plots.html">
       07. Box Plots
      </a>
     </li>
     <li class="">
      <a href="08. Violin and Box Plot Practice.html">
       08. Violin and Box Plot Practice
      </a>
     </li>
     <li class="">
      <a href="09. Clustered Bar Charts.html">
       09. Clustered Bar Charts
      </a>
     </li>
     <li class="">
      <a href="10. Categorical Plot Practice.html">
       10. Categorical Plot Practice
      </a>
     </li>
     <li class="">
      <a href="11. Faceting.html">
       11. Faceting
      </a>
     </li>
     <li class="">
      <a href="12. Adaptation of Univariate Plots.html">
       12. Adaptation of Univariate Plots
      </a>
     </li>
     <li class="">
      <a href="13. Line Plots.html">
       13. Line Plots
      </a>
     </li>
     <li class="">
      <a href="14. Additional Plot Practice.html">
       14. Additional Plot Practice
      </a>
     </li>
     <li class="">
      <a href="15. Lesson Summary.html">
       15. Lesson Summary
      </a>
     </li>
     <li class="">
      <a href="16. Extra Q-Q Plots.html">
       16. Extra: Q-Q Plots
      </a>
     </li>
     <li class="">
      <a href="17. Extra Swarm Plots.html">
       17. Extra: Swarm Plots
      </a>
     </li>
     <li class="">
      <a href="18. Extra Rug and Strip Plots.html">
       18. Extra: Rug and Strip Plots
      </a>
     </li>
     <li class="">
      <a href="19. Extra Stacked Plots.html">
       19. Extra: Stacked Plots
      </a>
     </li>
     <li class="">
      <a href="20. Extra Ridgeline Plots.html">
       20. Extra: Ridgeline Plots
      </a>
     </li>
    </ul>
    <ul class="sidebar-list list-unstyled CTAs">
     <li>
      <a class="article" href="../index.html">
       Back to Home
      </a>
     </li>
    </ul>
   </nav>
   <div id="content">
    <header class="container-fluild header">
     <div class="container">
      <div class="row">
       <div class="col-12">
        <div class="align-items-middle">
         <button class="btn btn-toggle-sidebar" id="sidebarCollapse" type="button">
          <div>
          </div>
          <div>
          </div>
          <div>
          </div>
         </button>
         <h1 style="display: inline-block">
          04. Heat Maps
         </h1>
        </div>
       </div>
      </div>
     </div>
    </header>
    <main class="container">
     <div class="row">
      <div class="col-12">
       <div class="ud-atom">
        <h3>
         <p>
          L4 041 Heat Maps V4
         </p>
        </h3>
        <video controls="">
         <source src="04. L4 041 Heat Maps V4-RyCdvsmBjtE.mp4" type="video/mp4"/>
         <track default="true" kind="subtitles" label="en" src="04. L4 041 Heat Maps V4-RyCdvsmBjtE.en.vtt" srclang="en"/>
         <track default="false" kind="subtitles" label="BR" src="04. L4 041 Heat Maps V4-RyCdvsmBjtE.pt-BR.vtt" srclang="BR"/>
         <track default="false" kind="subtitles" label="CN" src="04. L4 041 Heat Maps V4-RyCdvsmBjtE.zh-CN.vtt" srclang="CN"/>
        </video>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <hr/>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
         <p>
          Data Vis L4 C04 V1
         </p>
        </h3>
        <video controls="">
         <source src="04. Data Vis L4 C04 V1-O6ElT4IFXc0.mp4" type="video/mp4"/>
         <track default="true" kind="subtitles" label="en" src="04. Data Vis L4 C04 V1-O6ElT4IFXc0.en.vtt" srclang="en"/>
         <track default="false" kind="subtitles" label="BR" src="04. Data Vis L4 C04 V1-O6ElT4IFXc0.pt-BR.vtt" srclang="BR"/>
         <track default="false" kind="subtitles" label="CN" src="04. Data Vis L4 C04 V1-O6ElT4IFXc0.zh-CN.vtt" srclang="CN"/>
        </video>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <hr/>
         <h2 id="heat-maps">
          Heat Maps
         </h2>
         <p>
          A
          <strong>
           heat map
          </strong>
          is a 2-d version of the histogram that can be used as an alternative to a scatterplot. Like a scatterplot, the values of the two numeric variables to be plotted are placed on the plot axes. Similar to a histogram, the plotting area is divided into a grid and the number of points in each grid rectangle is added up. Since there won't be room for bar heights, counts are indicated instead by grid cell color. A heat map can be implemented with Matplotlib's
          <a href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.hist2d.html" rel="noopener noreferrer" target="_blank">
           <code>
            hist2d
           </code>
          </a>
          function.
         </p>
         <pre><code class="python language-python">plt.figure(figsize = [12, 5])

# left plot: scatterplot of discrete data with jitter and transparency
plt.subplot(1, 2, 1)
sb.regplot(data = df, x = 'disc_var1', y = 'disc_var2', fit_reg = False,
           x_jitter = 0.2, y_jitter = 0.2, scatter_kws = {'alpha' : 1/3})

# right plot: heat map with bin edges between values
plt.subplot(1, 2, 2)
bins_x = np.arange(0.5, 10.5+1, 1)
bins_y = np.arange(-0.5, 10.5+1, 1)
plt.hist2d(data = df, x = 'disc_var1', y = 'disc_var2',
           bins = [bins_x, bins_y])
plt.colorbar();</code></pre>
         <p>
          Notice that since we have two variables, the "bins" parameter takes a list of two bin edge specifications, one for each dimension. Choosing an appropriate bin size is just as important here as it was for the univariate histogram. We add a
          <a href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.colorbar.html" rel="noopener noreferrer" target="_blank">
           <code>
            colorbar
           </code>
          </a>
          function call to add a colorbar to the side of the plot, showing the mapping from counts to colors.
         </p>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <figure class="figure">
          <img alt="" class="img img-fluid" src="img/l4-c04-heatmap1.png"/>
          <figcaption class="figure-caption">
          </figcaption>
         </figure>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <p>
          As the color in the heatmap gets brighter and moves from blue to yellow, the higher the count of points in the corresponding cell.
         </p>
         <p>
          Heatmaps can also be used as 2-d versions of bar charts, plotting counts on combinations of two categorical variables instead of numeric variables. There is a function in seaborn,
          <code>
           heatmap
          </code>
          , that is built for categorical heatmaps. This will be discussed in more detail later in the lesson, in the section "Clustered Bar Charts".
         </p>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <h2 id="additional-variations">
          Additional Variations
         </h2>
         <p>
          To select a different color palette, you can set the "cmap" parameter in
          <code>
           hist2d
          </code>
          . The most convenient way of doing this is to set the "cmap" value as a string referencing a built-in Matplotlib palette. A list of valid strings can be found on
          <a href="https://matplotlib.org/api/pyplot_summary.html#colors-in-matplotlib" rel="noopener noreferrer" target="_blank">
           this part
          </a>
          of the Pyplot API documentation. A further discussion of color in plots will be left to the next lesson. For now, I will just show an example of reversing the default "viridis" color palette, by setting
          <code>
           cmap = 'viridis_r'
          </code>
          .
         </p>
         <p>
          Furthermore, I would like to distinguish cells with zero counts from those with non-zero counts. The "cmin" parameter specifies the minimum value in a cell before it will be plotted. By adding a
          <code>
           cmin = 0.5
          </code>
          parameter to the
          <code>
           hist2d
          </code>
          call, this means that a cell will only get colored if it contains at least one point.
         </p>
         <pre><code class="python language-python">bins_x = np.arange(0.5, 10.5+1, 1)
bins_y = np.arange(-0.5, 10.5+1, 1)
plt.hist2d(data = df, x = 'disc_var1', y = 'disc_var2',
           bins = [bins_x, bins_y], cmap = 'viridis_r', cmin = 0.5)
plt.colorbar()</code></pre>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <figure class="figure">
          <img alt="" class="img img-fluid" src="img/l4-c04-heatmap2.png"/>
          <figcaption class="figure-caption">
          </figcaption>
         </figure>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <p>
          If you have a lot of data, you might want to add annotations to cells in the plot indicating the count of points in each cell. From
          <code>
           hist2d
          </code>
          , this requires the addition of text elements one by one, much like how text annotations were added one by one to the bar plots in the previous lesson. We can get the counts to annotate directly from what is returned by
          <code>
           hist2d
          </code>
          , which includes not just the plotting object, but an array of counts and two vectors of bin edges.
         </p>
         <pre><code class="python language-python"># hist2d returns a number of different variables, including an array of counts
bins_x = np.arange(0.5, 10.5+1, 1)
bins_y = np.arange(-0.5, 10.5+1, 1)
h2d = plt.hist2d(data = df, x = 'disc_var1', y = 'disc_var2',
               bins = [bins_x, bins_y], cmap = 'viridis_r', cmin = 0.5)
counts = h2d[0]

# loop through the cell counts and add text annotations for each
for i in range(counts.shape[0]):
    for j in range(counts.shape[1]):
        c = counts[i,j]
        if c &gt;= 7: # increase visibility on darkest cells
            plt.text(bins_x[i]+0.5, bins_y[j]+0.5, int(c),
                     ha = 'center', va = 'center', color = 'white')
        elif c &gt; 0:
            plt.text(bins_x[i]+0.5, bins_y[j]+0.5, int(c),
                     ha = 'center', va = 'center', color = 'black')</code></pre>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <figure class="figure">
          <img alt="" class="img img-fluid" src="img/l4-c04-heatmap3.png"/>
          <figcaption class="figure-caption">
          </figcaption>
         </figure>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <p>
          If you have too many cells in your heat map, then the annotations will end up being too overwhelming, too much to attend to. In cases like that, it's best to leave off the annotations and let the data and colorbar speak for themselves. You're more likely to see annotations in a categorical heat map, where there are going to be fewer cells plotted. Indeed, there is a parameter built into seaborn's
          <code>
           heatmap
          </code>
          function for just that, as will be seen later.
         </p>
        </div>
       </div>
       <div class="divider">
       </div>
      </div>
      <div class="col-12">
       <p class="text-right">
        <a class="btn btn-outline-primary mt-4" href="05. Scatterplot Practice.html" role="button">
         Next Concept
        </a>
       </p>
      </div>
     </div>
    </main>
    <footer class="footer">
     <div class="container">
      <div class="row">
       <div class="col-12">
        <p class="text-center">
         udacity2.0 If you need the newest courses Plase add me wechat: udacity6
        </p>
       </div>
      </div>
     </div>
    </footer>
   </div>
  </div>
  <script src="../assets/js/jquery-3.3.1.min.js">
  </script>
  <script src="../assets/js/plyr.polyfilled.min.js">
  </script>
  <script src="../assets/js/bootstrap.min.js">
  </script>
  <script src="../assets/js/jquery.mCustomScrollbar.concat.min.js">
  </script>
  <script src="../assets/js/katex.min.js">
  </script>
  <script>
   // Initialize Plyr video players
    const players = Array.from(document.querySelectorAll('video')).map(p => new Plyr(p));

    // render math equations
    let elMath = document.getElementsByClassName('mathquill');
    for (let i = 0, len = elMath.length; i < len; i += 1) {
      const el = elMath[i];

      katex.render(el.textContent, el, {
        throwOnError: false
      });
    }

    // this hack will make sure Bootstrap tabs work when using Handlebars
    if ($('#question-tabs').length && $('#user-answer-tabs').length) {
      $("#question-tabs a.nav-link").on('click', function () {
        $("#question-tab-contents .tab-pane").hide();
        $($(this).attr("href")).show();
      });
      $("#user-answer-tabs a.nav-link").on('click', function () {
        $("#user-answer-tab-contents .tab-pane").hide();
        $($(this).attr("href")).show();
      });
    } else {
      $("a.nav-link").on('click', function () {
        $(".tab-pane").hide();
        $($(this).attr("href")).show();
      });
    }

    // side bar events
    $(document).ready(function () {
      $("#sidebar").mCustomScrollbar({
        theme: "minimal"
      });

      $('#sidebarCollapse').on('click', function () {
        $('#sidebar, #content').toggleClass('active');
        $('.collapse.in').toggleClass('in');
        $('a[aria-expanded=true]').attr('aria-expanded', 'false');
      });

      // scroll to first video on page loading
      if ($('video').length) {
        $('html,body').animate({ scrollTop: $('div.plyr').prev().offset().top});
      }

      // auto play first video: this may not work with chrome/safari due to autoplay policy
      if (players && players.length > 0) {
        players[0].play();
      }

      // scroll sidebar to current concept
      const currentInSideBar = $( "ul.sidebar-list.components li a:contains('04. Heat Maps')" )
      currentInSideBar.css( "text-decoration", "underline" );
      $("#sidebar").mCustomScrollbar('scrollTo', currentInSideBar);
    });
  </script>
 </body>
</html>
