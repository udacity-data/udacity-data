WEBVTT
Kind: captions
Language: zh-CN

00:00:00.000 --> 00:00:02.529
之前介绍的 pointplot 函数

00:00:02.529 --> 00:00:06.855
擅长探索数值变量与分类变量的关系

00:00:06.855 --> 00:00:09.130
我们需要另一个函数来探索

00:00:09.130 --> 00:00:12.395
两个数值变量的关系

00:00:12.394 --> 00:00:15.884
比如燃油效率和发动机排量

00:00:15.884 --> 00:00:19.625
这次 我们要用 Matplotlib 的 errorbar 函数

00:00:19.625 --> 00:00:24.170
该函数会连点成线 而我们可以选择是否添加误差线

00:00:24.170 --> 00:00:29.195
像之前一样设置参数 data、x 和 y

00:00:29.195 --> 00:00:33.149
然而绘制出来的图表并不能提炼出什么信息

00:00:33.149 --> 00:00:36.949
Matplotlib 直接把每对 x 和 y 值

00:00:36.950 --> 00:00:41.365
按其在 DataFrame 中出现的先后顺序连接了起来 没有进行合理的排序

00:00:41.365 --> 00:00:43.359
把这张图的连线去掉

00:00:43.359 --> 00:00:47.500
只呈现每对值相应的点 就是散点图了

00:00:47.500 --> 00:00:50.825
如果所有数据都按 x 变量进行排序

00:00:50.825 --> 00:00:55.325
而且每个 x 值只对应一个 y 值 那我们就可以使用误差线了

00:00:55.325 --> 00:00:58.795
为此 我们要给 DataFrame 做相应的调整

00:00:58.795 --> 00:01:01.310
首先 设置分组边界和中心点

00:01:01.310 --> 00:01:04.775
对排量数据进行汇总

00:01:04.775 --> 00:01:10.125
我要用中心值来准确绘制数据点

00:01:10.125 --> 00:01:12.540
就不管分组边界的最后一个值了

00:01:12.540 --> 00:01:15.580
反正没有实际的组中心与之对应

00:01:15.579 --> 00:01:18.439
接着 用 Pandas 的 cut 函数

00:01:18.439 --> 00:01:21.534
来确定各数据点对应哪一组

00:01:21.534 --> 00:01:24.314
第一个参数是一个切片出来的 Series

00:01:24.314 --> 00:01:27.149
第二个参数是分组的集合

00:01:27.150 --> 00:01:30.315
第三个参数用于确保等于平均值的值

00:01:30.314 --> 00:01:33.959
也会包含在组内

00:01:33.959 --> 00:01:36.289
现在我用 groupby 函数

00:01:36.290 --> 00:01:40.960
按排量分组聚合 然后取每组数据点的平均值

00:01:40.959 --> 00:01:44.094
再次绘制图表

00:01:44.094 --> 00:01:46.914
因为我们用的不是原始 DataFrame 了

00:01:46.915 --> 00:01:48.850
所以得修改参数

00:01:48.849 --> 00:01:51.799
用参数 x 设置组中心

00:01:51.799 --> 00:01:55.435
有关燃油效率的 Pandas Series 则设为参数 y

00:01:55.435 --> 00:01:57.704
所得折线图如图

00:01:57.704 --> 00:02:01.754
基本上发动机排量越大 燃油效率越低

00:02:01.754 --> 00:02:05.444
因为有些数据缺失了 所以折线这里出现了空隙

00:02:05.444 --> 00:02:07.434
使用 errorbar 函数

00:02:07.435 --> 00:02:10.485
我们还可以计算每一组燃油效率的标准差

00:02:10.485 --> 00:02:14.500
并用参数 yerr 将其绘制出来

00:02:14.500 --> 00:02:16.620
由图可知

00:02:16.620 --> 00:02:20.009
虽然发动机排量较小的车辆总体上燃油效率较高

00:02:20.009 --> 00:02:23.799
但差异性也比较大

