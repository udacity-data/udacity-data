WEBVTT
Kind: captions
Language: zh-CN

00:00:00.000 --> 00:00:02.339
之前我们用散点图探讨了

00:00:02.339 --> 00:00:05.615
发动机排量大小和燃油效率之间的相关性

00:00:05.615 --> 00:00:10.265
这里我设置了抖动和透明度 以便观察数据的主体位置

00:00:10.265 --> 00:00:14.635
我们也可以把这些数据绘制成热图 也就是一种二维直方图

00:00:14.634 --> 00:00:19.670
为此 最简单的办法就是用 matplotlib 的函数 hist2d

00:00:19.670 --> 00:00:22.945
我还调用了 colorbar 函数

00:00:22.945 --> 00:00:26.859
这样图表旁就会有与数量统计相对应的颜色图例了

00:00:26.859 --> 00:00:29.269
和单变量的 hist 函数一样

00:00:29.269 --> 00:00:31.460
这个函数默认将每个维度分成十组

00:00:31.460 --> 00:00:35.520
并对各矩形组里的数据点进行计数统计

00:00:35.520 --> 00:00:37.660
每个统计值都对应一种颜色

00:00:37.659 --> 00:00:41.154
在 matplotlib 默认的这个色板 viridis 中

00:00:41.155 --> 00:00:43.009
统计值越高 颜色越偏黄 亮度也越高

00:00:43.009 --> 00:00:45.304
统计值越低 颜色越偏紫 亮度也越低

00:00:45.304 --> 00:00:49.585
这样我们还是能找出主体趋势 但我们能做的远不止如此

00:00:49.585 --> 00:00:54.405
首先 在矩形区域绘制出来之前 设置统计值下限

00:00:54.405 --> 00:00:58.020
假如设 cmin 的值为 0.5

00:00:58.020 --> 00:01:02.840
任何没有统计值的组会返回为 nan 因而不会得到颜色填充

00:01:02.840 --> 00:01:04.935
由于这里白色表示 0

00:01:04.935 --> 00:01:06.820
所以我要选一个相反的色板

00:01:06.819 --> 00:01:09.784
用亮度低的颜色表示高数值

00:01:09.784 --> 00:01:13.314
因此 我设变量 cmap 为 viridis_r

00:01:13.314 --> 00:01:17.140
其中 _r 表示色板的颜色反转

00:01:17.140 --> 00:01:19.375
你可以在官方文档中

00:01:19.375 --> 00:01:22.730
找到大量与 matplotlib 兼容的内置色板

00:01:22.730 --> 00:01:27.045
课程稍后会进一步介绍颜色这方面的内容

00:01:27.045 --> 00:01:29.555
最后 修改分组

00:01:29.555 --> 00:01:32.760
我们可以为函数 hist2d 的参数 bins 提供一个列表

00:01:32.760 --> 00:01:37.609
按顺序指明 x 轴和 y 轴的组边界

00:01:37.609 --> 00:01:41.015
我看了下两个变量的描述性统计数据

00:01:41.015 --> 00:01:44.739
决定设排量的组距为 0.3

00:01:44.739 --> 00:01:47.199
设燃油效率的组距为 3

00:01:47.200 --> 00:01:50.920
用 NumPy 的函数 arange 把组边界赋给

00:01:50.920 --> 00:01:54.609
变量 bins_x 和 bins_y

00:01:54.609 --> 00:01:56.844
修改完毕 生成图表

00:01:56.844 --> 00:02:00.359
由图可知 数据有两个高频区域

00:02:00.359 --> 00:02:04.469
其中燃油效率和发动机排量大小呈负相关趋势

