<!-- udacimak v1.4.4 -->
<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <meta content="ie=edge" http-equiv="X-UA-Compatible"/>
  <title>
   GaussianNB Deployment on Terrain Data
  </title>
  <link href="../assets/css/bootstrap.min.css" rel="stylesheet"/>
  <link href="../assets/css/plyr.css" rel="stylesheet"/>
  <link href="../assets/css/katex.min.css" rel="stylesheet"/>
  <link href="../assets/css/jquery.mCustomScrollbar.min.css" rel="stylesheet"/>
  <link href="../assets/css/styles.css" rel="stylesheet"/>
  <link href="../assets/img/udacimak.png" rel="shortcut icon" type="image/png">
  </link>
 </head>
 <body>
  <div class="wrapper">
   <nav id="sidebar">
    <div class="sidebar-header">
     <h3>
      Naive Bayes
     </h3>
    </div>
    <ul class="sidebar-list list-unstyled CTAs">
     <li>
      <a class="article" href="../index.html">
       Back to Home
      </a>
     </li>
    </ul>
    <ul class="sidebar-list list-unstyled components">
     <li class="">
      <a href="01. ML in The Google Self-Driving Car.html">
       01. ML in The Google Self-Driving Car
      </a>
     </li>
     <li class="">
      <a href="02. Acerous Vs. Non-Acerous.html">
       02. Acerous Vs. Non-Acerous
      </a>
     </li>
     <li class="">
      <a href="03. Supervised Classification Example.html">
       03. Supervised Classification Example
      </a>
     </li>
     <li class="">
      <a href="04. Features and Labels Musical Example.html">
       04. Features and Labels Musical Example
      </a>
     </li>
     <li class="">
      <a href="05. Features Visualization Quiz.html">
       05. Features Visualization Quiz
      </a>
     </li>
     <li class="">
      <a href="06. Classification By Eye.html">
       06. Classification By Eye
      </a>
     </li>
     <li class="">
      <a href="07. Intro To Stanley Terrain Classification.html">
       07. Intro To Stanley Terrain Classification
      </a>
     </li>
     <li class="">
      <a href="08. Speed Scatterplot Grade and Bumpiness.html">
       08. Speed Scatterplot: Grade and Bumpiness
      </a>
     </li>
     <li class="">
      <a href="09. Speed Scatterplot 2.html">
       09. Speed Scatterplot 2
      </a>
     </li>
     <li class="">
      <a href="10. Speed Scatterplot 3.html">
       10. Speed Scatterplot 3
      </a>
     </li>
     <li class="">
      <a href="11. From Scatterplots to Predictions.html">
       11. From Scatterplots to Predictions
      </a>
     </li>
     <li class="">
      <a href="12. From Scatterplots to Predictions 2.html">
       12. From Scatterplots to Predictions 2
      </a>
     </li>
     <li class="">
      <a href="13. From Scatterplots to Decision Surfaces.html">
       13. From Scatterplots to Decision Surfaces
      </a>
     </li>
     <li class="">
      <a href="14. A Good Linear Decision Surface.html">
       14. A Good Linear Decision Surface
      </a>
     </li>
     <li class="">
      <a href="15. Transition to Using Naive Bayes.html">
       15. Transition to Using Naive Bayes
      </a>
     </li>
     <li class="">
      <a href="16. NB Decision Boundary in Python.html">
       16. NB Decision Boundary in Python
      </a>
     </li>
     <li class="">
      <a href="17. Getting Started With sklearn.html">
       17. Getting Started With sklearn
      </a>
     </li>
     <li class="">
      <a href="18. Gaussian NB Example.html">
       18. Gaussian NB Example
      </a>
     </li>
     <li class="">
      <a href="19. GaussianNB Deployment on Terrain Data.html">
       19. GaussianNB Deployment on Terrain Data
      </a>
     </li>
     <li class="">
      <a href="20. Calculating NB Accuracy.html">
       20. Calculating NB Accuracy
      </a>
     </li>
     <li class="">
      <a href="21. Training and Testing Data.html">
       21. Training and Testing Data
      </a>
     </li>
     <li class="">
      <a href="22. Unpacking NB Using Bayes Rule.html">
       22. Unpacking NB Using Bayes Rule
      </a>
     </li>
     <li class="">
      <a href="23. Bayes Rule.html">
       23. Bayes Rule
      </a>
     </li>
     <li class="">
      <a href="24. Cancer Test.html">
       24. Cancer Test
      </a>
     </li>
     <li class="">
      <a href="25. Prior and Posterior.html">
       25. Prior and Posterior
      </a>
     </li>
     <li class="">
      <a href="26. Normalizing 1.html">
       26. Normalizing 1
      </a>
     </li>
     <li class="">
      <a href="27. Normalizing 2.html">
       27. Normalizing 2
      </a>
     </li>
     <li class="">
      <a href="28. Normalizing 3.html">
       28. Normalizing 3
      </a>
     </li>
     <li class="">
      <a href="29. Total Probability.html">
       29. Total Probability
      </a>
     </li>
     <li class="">
      <a href="30. Bayes Rule Diagram.html">
       30. Bayes Rule Diagram
      </a>
     </li>
     <li class="">
      <a href="31. Bayes Rule for Classification.html">
       31. Bayes Rule for Classification
      </a>
     </li>
     <li class="">
      <a href="32. Chris or Sara.html">
       32. Chris or Sara
      </a>
     </li>
     <li class="">
      <a href="33. Posterior Probabilities.html">
       33. Posterior Probabilities
      </a>
     </li>
     <li class="">
      <a href="34. Bayesian Probabilities On Your Own.html">
       34. Bayesian Probabilities On Your Own
      </a>
     </li>
     <li class="">
      <a href="35. Why Is Naive Bayes Naive.html">
       35. Why Is Naive Bayes Naive
      </a>
     </li>
     <li class="">
      <a href="36. Naive Bayes Strengths and Weaknesses.html">
       36. Naive Bayes Strengths and Weaknesses
      </a>
     </li>
     <li class="">
      <a href="37. Congrats on Learning Naive Bayes.html">
       37. Congrats on Learning Naive Bayes
      </a>
     </li>
     <li class="">
      <a href="38. Naive Bayes Mini-Project Video.html">
       38. Naive Bayes Mini-Project Video
      </a>
     </li>
     <li class="">
      <a href="39. Getting Started with Mini-Projects.html">
       39. Getting Started with Mini-Projects
      </a>
     </li>
     <li class="">
      <a href="40. Machine Learning for Author ID.html">
       40. Machine Learning for Author ID
      </a>
     </li>
     <li class="">
      <a href="41. Getting Your Code Set Up.html">
       41. Getting Your Code Set Up
      </a>
     </li>
     <li class="">
      <a href="42. Author ID Accuracy.html">
       42. Author ID Accuracy
      </a>
     </li>
     <li class="">
      <a href="43. Timing Your NB Classifier.html">
       43. Timing Your NB Classifier
      </a>
     </li>
    </ul>
    <ul class="sidebar-list list-unstyled CTAs">
     <li>
      <a class="article" href="../index.html">
       Back to Home
      </a>
     </li>
    </ul>
   </nav>
   <div id="content">
    <header class="container-fluild header">
     <div class="container">
      <div class="row">
       <div class="col-12">
        <div class="align-items-middle">
         <button class="btn btn-toggle-sidebar" id="sidebarCollapse" type="button">
          <div>
          </div>
          <div>
          </div>
          <div>
          </div>
         </button>
         <h1 style="display: inline-block">
          19. GaussianNB Deployment on Terrain Data
         </h1>
        </div>
       </div>
      </div>
     </div>
    </header>
    <main class="container">
     <div class="row">
      <div class="col-12">
       <div class="ud-atom">
        <h3>
         <p>
          GaussianNB Deployment on Terrain Data
         </p>
        </h3>
        <div>
         <div>
          <h4>
           Question:
          </h4>
          <video controls="">
           <source src="19. GaussianNB Deployment on Terrain Data-VBs6D4ggnYY.mp4" type="video/mp4"/>
           <track default="false" kind="subtitles" label="ar" src="19. GaussianNB Deployment on Terrain Data-VBs6D4ggnYY.ar.vtt" srclang="ar"/>
           <track default="true" kind="subtitles" label="en" src="19. GaussianNB Deployment on Terrain Data-VBs6D4ggnYY.en.vtt" srclang="en"/>
           <track default="false" kind="subtitles" label="ja" src="19. GaussianNB Deployment on Terrain Data-VBs6D4ggnYY.ja.vtt" srclang="ja"/>
           <track default="false" kind="subtitles" label="BR" src="19. GaussianNB Deployment on Terrain Data-VBs6D4ggnYY.pt-BR.vtt" srclang="BR"/>
           <track default="false" kind="subtitles" label="CN" src="19. GaussianNB Deployment on Terrain Data-VBs6D4ggnYY.zh-CN.vtt" srclang="CN"/>
          </video>
         </div>
         <h4>
          Start Quiz:
         </h4>
         <div>
          <div class="nav nav-tabs nav-fill" id="question-tabs" role="tablist">
           <a aria-controls="46940-studentMain-py" aria-selected="true" class="nav-item nav-link active show" data-toggle="tab" href="#46940-studentMain-py" id="tab-46940-studentMain-py" role="tab">
            studentMain.py
           </a>
           <a aria-controls="46940-class_vis-py" aria-selected="false" class="nav-item nav-link" data-toggle="tab" href="#46940-class_vis-py" id="tab-46940-class_vis-py" role="tab">
            class_vis.py
           </a>
           <a aria-controls="46940-prep_terrain_data-py" aria-selected="false" class="nav-item nav-link" data-toggle="tab" href="#46940-prep_terrain_data-py" id="tab-46940-prep_terrain_data-py" role="tab">
            prep_terrain_data.py
           </a>
           <a aria-controls="46940-ClassifyNB-py" aria-selected="false" class="nav-item nav-link" data-toggle="tab" href="#46940-ClassifyNB-py" id="tab-46940-ClassifyNB-py" role="tab">
            ClassifyNB.py
           </a>
          </div>
          <div class="tab-content" id="question-tab-contents" style="padding: 20px 0;">
           <div aria-labelledby="tab-46940-studentMain-py" class="tab-pane active show" id="46940-studentMain-py" role="tabpanel">
            <pre><code></code>#!/usr/bin/python

""" Complete the code in ClassifyNB.py with the sklearn
    Naive Bayes classifier to classify the terrain data.
    
    The objective of this exercise is to recreate the decision 
    boundary found in the lesson video, and make a plot that
    visually shows the decision boundary """


from prep_terrain_data import makeTerrainData
from class_vis import prettyPicture, output_image
from ClassifyNB import classify

import numpy as np
import pylab as pl


features_train, labels_train, features_test, labels_test = makeTerrainData()

### the training data (features_train, labels_train) have both "fast" and "slow" points mixed
### in together--separate them so we can give them different colors in the scatterplot,
### and visually identify them
grade_fast = [features_train[ii][0] for ii in range(0, len(features_train)) if labels_train[ii]==0]
bumpy_fast = [features_train[ii][1] for ii in range(0, len(features_train)) if labels_train[ii]==0]
grade_slow = [features_train[ii][0] for ii in range(0, len(features_train)) if labels_train[ii]==1]
bumpy_slow = [features_train[ii][1] for ii in range(0, len(features_train)) if labels_train[ii]==1]


# You will need to complete this function imported from the ClassifyNB script.
# Be sure to change to that code tab to complete this quiz.
clf = classify(features_train, labels_train)



### draw the decision boundary with the text points overlaid
prettyPicture(clf, features_test, labels_test)
output_image("test.png", "png", open("test.png", "rb").read())




</pre>
           </div>
           <div aria-labelledby="tab-46940-class_vis-py" class="tab-pane" id="46940-class_vis-py" role="tabpanel">
            <pre><code></code>#!/usr/bin/python

#from udacityplots import *
import warnings
warnings.filterwarnings("ignore")

import matplotlib 
matplotlib.use('agg')

import matplotlib.pyplot as plt
import pylab as pl
import numpy as np

#import numpy as np
#import matplotlib.pyplot as plt
#plt.ioff()

def prettyPicture(clf, X_test, y_test):
    x_min = 0.0; x_max = 1.0
    y_min = 0.0; y_max = 1.0

    # Plot the decision boundary. For that, we will assign a color to each
    # point in the mesh [x_min, m_max]x[y_min, y_max].
    h = .01  # step size in the mesh
    xx, yy = np.meshgrid(np.arange(x_min, x_max, h), np.arange(y_min, y_max, h))
    Z = clf.predict(np.c_[xx.ravel(), yy.ravel()])

    # Put the result into a color plot
    Z = Z.reshape(xx.shape)
    plt.xlim(xx.min(), xx.max())
    plt.ylim(yy.min(), yy.max())

    plt.pcolormesh(xx, yy, Z, cmap=pl.cm.seismic)

    # Plot also the test points
    grade_sig = [X_test[ii][0] for ii in range(0, len(X_test)) if y_test[ii]==0]
    bumpy_sig = [X_test[ii][1] for ii in range(0, len(X_test)) if y_test[ii]==0]
    grade_bkg = [X_test[ii][0] for ii in range(0, len(X_test)) if y_test[ii]==1]
    bumpy_bkg = [X_test[ii][1] for ii in range(0, len(X_test)) if y_test[ii]==1]

    plt.scatter(grade_sig, bumpy_sig, color = "b", label="fast")
    plt.scatter(grade_bkg, bumpy_bkg, color = "r", label="slow")
    plt.legend()
    plt.xlabel("bumpiness")
    plt.ylabel("grade")

    plt.savefig("test.png")
    
import base64
import json
import subprocess

def output_image(name, format, bytes):
    image_start = "BEGIN_IMAGE_f9825uweof8jw9fj4r8"
    image_end = "END_IMAGE_0238jfw08fjsiufhw8frs"
    data = {}
    data['name'] = name
    data['format'] = format
    data['bytes'] = base64.encodestring(bytes)
    print image_start+json.dumps(data)+image_end</pre>
           </div>
           <div aria-labelledby="tab-46940-prep_terrain_data-py" class="tab-pane" id="46940-prep_terrain_data-py" role="tabpanel">
            <pre><code></code>#!/usr/bin/python
import random


def makeTerrainData(n_points=1000):
###############################################################################
### make the toy dataset
    random.seed(42)
    grade = [random.random() for ii in range(0,n_points)]
    bumpy = [random.random() for ii in range(0,n_points)]
    error = [random.random() for ii in range(0,n_points)]
    y = [round(grade[ii]*bumpy[ii]+0.3+0.1*error[ii]) for ii in range(0,n_points)]
    for ii in range(0, len(y)):
        if grade[ii]&gt;0.8 or bumpy[ii]&gt;0.8:
            y[ii] = 1.0

### split into train/test sets
    X = [[gg, ss] for gg, ss in zip(grade, bumpy)]
    split = int(0.75*n_points)
    X_train = X[0:split]
    X_test  = X[split:]
    y_train = y[0:split]
    y_test  = y[split:]

    grade_sig = [X_train[ii][0] for ii in range(0, len(X_train)) if y_train[ii]==0]
    bumpy_sig = [X_train[ii][1] for ii in range(0, len(X_train)) if y_train[ii]==0]
    grade_bkg = [X_train[ii][0] for ii in range(0, len(X_train)) if y_train[ii]==1]
    bumpy_bkg = [X_train[ii][1] for ii in range(0, len(X_train)) if y_train[ii]==1]

#    training_data = {"fast":{"grade":grade_sig, "bumpiness":bumpy_sig}
#            , "slow":{"grade":grade_bkg, "bumpiness":bumpy_bkg}}


    grade_sig = [X_test[ii][0] for ii in range(0, len(X_test)) if y_test[ii]==0]
    bumpy_sig = [X_test[ii][1] for ii in range(0, len(X_test)) if y_test[ii]==0]
    grade_bkg = [X_test[ii][0] for ii in range(0, len(X_test)) if y_test[ii]==1]
    bumpy_bkg = [X_test[ii][1] for ii in range(0, len(X_test)) if y_test[ii]==1]

    test_data = {"fast":{"grade":grade_sig, "bumpiness":bumpy_sig}
            , "slow":{"grade":grade_bkg, "bumpiness":bumpy_bkg}}

    return X_train, y_train, X_test, y_test
#    return training_data, test_data</pre>
           </div>
           <div aria-labelledby="tab-46940-ClassifyNB-py" class="tab-pane" id="46940-ClassifyNB-py" role="tabpanel">
            <pre><code></code>def classify(features_train, labels_train):   
    ### import the sklearn module for GaussianNB
    ### create classifier
    ### fit the classifier on the training features and labels
    ### return the fit classifier
    
    
    ### your code goes here!
    
    </pre>
           </div>
          </div>
         </div>
         <div>
          <details>
           <summary>
            <strong>
             Solution:
            </strong>
           </summary>
           <div>
            <video controls="">
             <source src="19. GaussianNB Deployment on Terrain Data-TcSnd3_hAy8.mp4" type="video/mp4"/>
             <track default="false" kind="subtitles" label="ar" src="19. GaussianNB Deployment on Terrain Data-TcSnd3_hAy8.ar.vtt" srclang="ar"/>
             <track default="true" kind="subtitles" label="en" src="19. GaussianNB Deployment on Terrain Data-TcSnd3_hAy8.en.vtt" srclang="en"/>
             <track default="false" kind="subtitles" label="ja" src="19. GaussianNB Deployment on Terrain Data-TcSnd3_hAy8.ja.vtt" srclang="ja"/>
             <track default="false" kind="subtitles" label="BR" src="19. GaussianNB Deployment on Terrain Data-TcSnd3_hAy8.pt-BR.vtt" srclang="BR"/>
             <track default="false" kind="subtitles" label="CN" src="19. GaussianNB Deployment on Terrain Data-TcSnd3_hAy8.zh-CN.vtt" srclang="CN"/>
            </video>
           </div>
          </details>
         </div>
        </div>
        <div class="jumbotron" style="margin-top: 50px; margin-bottom: 50px;">
         <h3>
          INSTRUCTOR NOTE:
         </h3>
         <p>
          To find the
          <code>
           ClassifyNB.py
          </code>
          script that you need to update for the quiz, you can click on the dropdown in the classroom code editor to get a list of files that will be used.
         </p>
         <p>
          In the quiz that follows, the line that reads
          <br/>
          <br>
           <code>
            pred = clf.predict(features_test)
           </code>
           <br/>
           <br/>
           <br>
            is not necessary for drawing the decision boundary, at least as we've written the code.
           </br>
          </br>
         </p>
         <p>
          However, the whole point of making a classifier is that you can make predictions with it, so be sure to keep it in mind since you'll be using it in the quiz after this one.
         </p>
        </div>
       </div>
       <div class="divider">
       </div>
      </div>
      <div class="col-12">
       <p class="text-right">
        <a class="btn btn-outline-primary mt-4" href="20. Calculating NB Accuracy.html" role="button">
         Next Concept
        </a>
       </p>
      </div>
     </div>
    </main>
    <footer class="footer">
     <div class="container">
      <div class="row">
       <div class="col-12">
        <p class="text-center">
         udacity2.0 If you need the newest courses Plase add me wechat: udacity6
        </p>
       </div>
      </div>
     </div>
    </footer>
   </div>
  </div>
  <script src="../assets/js/jquery-3.3.1.min.js">
  </script>
  <script src="../assets/js/plyr.polyfilled.min.js">
  </script>
  <script src="../assets/js/bootstrap.min.js">
  </script>
  <script src="../assets/js/jquery.mCustomScrollbar.concat.min.js">
  </script>
  <script src="../assets/js/katex.min.js">
  </script>
  <script>
   // Initialize Plyr video players
    const players = Array.from(document.querySelectorAll('video')).map(p => new Plyr(p));

    // render math equations
    let elMath = document.getElementsByClassName('mathquill');
    for (let i = 0, len = elMath.length; i < len; i += 1) {
      const el = elMath[i];

      katex.render(el.textContent, el, {
        throwOnError: false
      });
    }

    // this hack will make sure Bootstrap tabs work when using Handlebars
    if ($('#question-tabs').length && $('#user-answer-tabs').length) {
      $("#question-tabs a.nav-link").on('click', function () {
        $("#question-tab-contents .tab-pane").hide();
        $($(this).attr("href")).show();
      });
      $("#user-answer-tabs a.nav-link").on('click', function () {
        $("#user-answer-tab-contents .tab-pane").hide();
        $($(this).attr("href")).show();
      });
    } else {
      $("a.nav-link").on('click', function () {
        $(".tab-pane").hide();
        $($(this).attr("href")).show();
      });
    }

    // side bar events
    $(document).ready(function () {
      $("#sidebar").mCustomScrollbar({
        theme: "minimal"
      });

      $('#sidebarCollapse').on('click', function () {
        $('#sidebar, #content').toggleClass('active');
        $('.collapse.in').toggleClass('in');
        $('a[aria-expanded=true]').attr('aria-expanded', 'false');
      });

      // scroll to first video on page loading
      if ($('video').length) {
        $('html,body').animate({ scrollTop: $('div.plyr').prev().offset().top});
      }

      // auto play first video: this may not work with chrome/safari due to autoplay policy
      if (players && players.length > 0) {
        players[0].play();
      }

      // scroll sidebar to current concept
      const currentInSideBar = $( "ul.sidebar-list.components li a:contains('19. GaussianNB Deployment on Terrain Data')" )
      currentInSideBar.css( "text-decoration", "underline" );
      $("#sidebar").mCustomScrollbar('scrollTo', currentInSideBar);
    });
  </script>
 </body>
</html>
