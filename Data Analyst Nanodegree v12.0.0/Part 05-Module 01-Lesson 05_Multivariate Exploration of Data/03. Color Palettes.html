<!-- udacimak v1.4.4 -->
<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <meta content="ie=edge" http-equiv="X-UA-Compatible"/>
  <title>
   Color Palettes
  </title>
  <link href="../assets/css/bootstrap.min.css" rel="stylesheet"/>
  <link href="../assets/css/plyr.css" rel="stylesheet"/>
  <link href="../assets/css/katex.min.css" rel="stylesheet"/>
  <link href="../assets/css/jquery.mCustomScrollbar.min.css" rel="stylesheet"/>
  <link href="../assets/css/styles.css" rel="stylesheet"/>
  <link href="../assets/img/udacimak.png" rel="shortcut icon" type="image/png">
  </link>
 </head>
 <body>
  <div class="wrapper">
   <nav id="sidebar">
    <div class="sidebar-header">
     <h3>
      Multivariate Exploration of Data
     </h3>
    </div>
    <ul class="sidebar-list list-unstyled CTAs">
     <li>
      <a class="article" href="../index.html">
       Back to Home
      </a>
     </li>
    </ul>
    <ul class="sidebar-list list-unstyled components">
     <li class="">
      <a href="01. Introduction.html">
       01. Introduction
      </a>
     </li>
     <li class="">
      <a href="02. Non-Positional Encodings for Third Variables.html">
       02. Non-Positional Encodings for Third Variables
      </a>
     </li>
     <li class="">
      <a href="03. Color Palettes.html">
       03. Color Palettes
      </a>
     </li>
     <li class="">
      <a href="04. Encodings Practice.html">
       04. Encodings Practice
      </a>
     </li>
     <li class="">
      <a href="05. Faceting in Two Directions.html">
       05. Faceting in Two Directions
      </a>
     </li>
     <li class="">
      <a href="06. Other Adaptations of Bivariate Plots.html">
       06. Other Adaptations of Bivariate Plots
      </a>
     </li>
     <li class="">
      <a href="07. Adapted Plot Practice.html">
       07. Adapted Plot Practice
      </a>
     </li>
     <li class="">
      <a href="08. Plot Matrices.html">
       08. Plot Matrices
      </a>
     </li>
     <li class="">
      <a href="09. Feature Engineering.html">
       09. Feature Engineering
      </a>
     </li>
     <li class="">
      <a href="10. How Much is Too Much.html">
       10. How Much is Too Much?
      </a>
     </li>
     <li class="">
      <a href="11. Additional Plot Practice.html">
       11. Additional Plot Practice
      </a>
     </li>
     <li class="">
      <a href="12. Lesson Summary.html">
       12. Lesson Summary
      </a>
     </li>
    </ul>
    <ul class="sidebar-list list-unstyled CTAs">
     <li>
      <a class="article" href="../index.html">
       Back to Home
      </a>
     </li>
    </ul>
   </nav>
   <div id="content">
    <header class="container-fluild header">
     <div class="container">
      <div class="row">
       <div class="col-12">
        <div class="align-items-middle">
         <button class="btn btn-toggle-sidebar" id="sidebarCollapse" type="button">
          <div>
          </div>
          <div>
          </div>
          <div>
          </div>
         </button>
         <h1 style="display: inline-block">
          03. Color Palettes
         </h1>
        </div>
       </div>
      </div>
     </div>
    </header>
    <main class="container">
     <div class="row">
      <div class="col-12">
       <div class="ud-atom">
        <h3>
         <p>
          L5 031 Color Palettes V1
         </p>
        </h3>
        <video controls="">
         <source src="03. L5 031 Color Palettes V1-nirOTWkuiSM.mp4" type="video/mp4"/>
         <track default="true" kind="subtitles" label="en" src="03. L5 031 Color Palettes V1-nirOTWkuiSM.en.vtt" srclang="en"/>
         <track default="false" kind="subtitles" label="BR" src="03. L5 031 Color Palettes V1-nirOTWkuiSM.pt-BR.vtt" srclang="BR"/>
         <track default="false" kind="subtitles" label="CN" src="03. L5 031 Color Palettes V1-nirOTWkuiSM.zh-CN.vtt" srclang="CN"/>
        </video>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <hr/>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
         <p>
          DataVis L5C03 V2
         </p>
        </h3>
        <video controls="">
         <source src="03. DataVis L5C03 V2-iokI7HrxeNc.mp4" type="video/mp4"/>
         <track default="true" kind="subtitles" label="en" src="03. DataVis L5C03 V2-iokI7HrxeNc.en.vtt" srclang="en"/>
         <track default="false" kind="subtitles" label="BR" src="03. DataVis L5C03 V2-iokI7HrxeNc.pt-BR.vtt" srclang="BR"/>
         <track default="false" kind="subtitles" label="CN" src="03. DataVis L5C03 V2-iokI7HrxeNc.zh-CN.vtt" srclang="CN"/>
        </video>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <hr/>
         <h2 id="encoding-via-color">
          Encoding via Color
         </h2>
         <p>
          Color is a very common encoding for variables, for both qualitative and quantitative variables. You've already seen this employed in previous lessons where position could not be used to encode a value: color for category in a clustered bar chart, and color for count in a heat map (both as a 2-d histogram and as a 2-d bar chart). Here, we'll look at how to employ color in scatterplots, as well as discuss more about color palette choices depending on the type of data you have.
         </p>
         <p>
          If you have a qualitative variable, you can set different colors for different levels of a categorical variable through the "hue" parameter on seaborn's
          <a href="https://seaborn.pydata.org/generated/seaborn.FacetGrid.html" rel="noopener noreferrer" target="_blank">
           <strong>
            FacetGrid
           </strong>
          </a>
          class.
         </p>
         <pre><code class="python language-python">g = sb.FacetGrid(data = df, hue = 'cat_var1', size = 5)
g.map(plt.scatter, 'num_var1', 'num_var2')
g.add_legend()</code></pre>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <figure class="figure">
          <img alt="" class="img img-fluid" src="img/l5-c03-color1.png"/>
          <figcaption class="figure-caption">
          </figcaption>
         </figure>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <p>
          We get a plot that is similar to what was observed in the previous page: points of category A tend to be smaller than category B on "num_var1" for the x-axis, and there doesn't appear to be any interaction with "num_var2" as depicted on the y-axis.
         </p>
         <p>
          For quantitative variables, we should not take the same approach, since
          <strong>
           FacetGrid
          </strong>
          expects any variable input for subsetting to be categorical. Instead, we can set color based on numeric value in the
          <code>
           scatter
          </code>
          function through the "c" parameter, much like how we set up marker sizes through "s". (Unlike with size, we don't have an easy way of setting color by numeric value through
          <code>
           regplot
          </code>
          due to how its "color" argument is set up.)
         </p>
         <pre><code class="python language-python">plt.scatter(data = df, x = 'num_var1', y = 'num_var2', c = 'num_var3')
plt.colorbar()</code></pre>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <figure class="figure">
          <img alt="" class="img img-fluid" src="img/l5-c03-color2.png"/>
          <figcaption class="figure-caption">
          </figcaption>
         </figure>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <p>
          As we saw before, when points lie further away from the central line through the data, the value on the third variable decreases. Compared to the size encoding, we have a more precise idea of value on the third variable, though certainly not as precise as positional encodings.
         </p>
         <h2 id="color-palettes">
          Color Palettes
         </h2>
         <p>
          Depending on the type of data you have, you may want to change the type of color palette that you use to depict your data. There are three major classes of color palette to consider: qualitative, sequential, and diverging.
         </p>
         <p>
          <strong>
           Qualitative
          </strong>
          palettes are built for nominal-type data. This is the palette class taken by the default palette.
         </p>
         <pre><code class="python language-python">sb.palplot(sb.color_palette(n_colors=9))</code></pre>
         <p>
          (Documentation: seaborn
          <a href="https://seaborn.pydata.org/generated/seaborn.palplot.html" rel="noopener noreferrer" target="_blank">
           <code>
            palplot
           </code>
          </a>
          ,
          <a href="https://seaborn.pydata.org/generated/seaborn.color_palette.html" rel="noopener noreferrer" target="_blank">
           <code>
            color_palette
           </code>
          </a>
          )
         </p>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <figure class="figure">
          <img alt="" class="img img-fluid" src="img/l5-c03-color3.png"/>
          <figcaption class="figure-caption">
          </figcaption>
         </figure>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <p>
          In a qualitative palette, consecutive color values are distinct so that there is no inherent ordering of levels implied. Colors in a good qualitative palette should also try and avoid drastic changes in brightness and saturation that would cause a reader to interpret one category as being more important than the others - unless that emphasis is deliberate and purposeful.
         </p>
         <p>
          For other types of data (ordinal and numeric), a choice may need to be made between a sequential scale and a diverging scale. In a
          <strong>
           sequential
          </strong>
          palette, consecutive color values should follow each other systematically. Typically, this follows a light-to-dark trend across a single or small range of hues, where light colors indicate low values and dark colors indicate high values. The default sequential color map, "viridis", takes the opposite approach, with dark colors indicating low values, and light values indicating high.
         </p>
         <pre><code class="python language-python">sb.palplot(sb.color_palette('viridis', 9))</code></pre>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <figure class="figure">
          <img alt="" class="img img-fluid" src="img/l5-c03-color4.png"/>
          <figcaption class="figure-caption">
          </figcaption>
         </figure>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <p>
          Most of the time, a sequential palette will depict ordinal or numeric data just fine. However, if there is a meaningful zero or center value for the variable, you may want to consider using a
          <strong>
           diverging
          </strong>
          palette. In a diverging palette, two sequential palettes with different hues are put back to back, with a common color (usually white or gray) connecting them. One hue indicates values greater than the center point, while the other indicates values smaller than the center.
         </p>
         <pre><code class="python language-python">sb.palplot(sb.color_palette('vlag', 9))</code></pre>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <figure class="figure">
          <img alt="" class="img img-fluid" src="img/l5-c03-color5.png"/>
          <figcaption class="figure-caption">
          </figcaption>
         </figure>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <h2 id="selecting-color-palettes">
          Selecting Color Palettes
         </h2>
         <p>
          If you want to change the color map for your plot, the easiest way of doing so is by using one of the built-ins from Matplotlib or Seaborn.
          <a href="https://matplotlib.org/api/pyplot_summary.html#colors-in-matplotlib" rel="noopener noreferrer" target="_blank">
           This part
          </a>
          of the Matplotlib documentation has a list of strings that can be understood for color mappings. For most of your purposes, stick with the palettes noted in the top few tables as built-in for Matplotlib ('viridis', etc.) or from ColorBrewer; the remaining palettes may not be as perceptually consistent. Seaborn also adds in a number of its own palettes:
         </p>
         <ul>
          <li>
           <strong>
            Qualitative
           </strong>
           (all up to 6 colors): 'deep', 'pastel', 'dark', 'muted', 'bright', 'colorblind'
          </li>
          <li>
           <strong>
            Sequential
           </strong>
           : 'rocket' (white-orange-red-purple-black), 'mako' (mint-green-blue-purple-black)
          </li>
          <li>
           <strong>
            Diverging
           </strong>
           : 'vlag' (blue-white-red), 'icefire' (blue-black-orange)
          </li>
         </ul>
         <p>
          For all of these strings, appending '_r' reverses the palette, which is useful if a sequential or diverging palette is rendered counter to your expectations.
         </p>
         <p>
          A color palette can be set in
          <strong>
           FacetGrid
          </strong>
          through the "palette" parameter, and in
          <code>
           scatter
          </code>
          through the "cmap" parameter.
         </p>
         <pre><code class="python language-python">g = sb.FacetGrid(data = df, hue = 'cat_var1', size = 5,
                 palette = 'colorblind')
g.map(plt.scatter, 'num_var1', 'num_var2')
g.add_legend()</code></pre>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <figure class="figure">
          <img alt="" class="img img-fluid" src="img/l5-c03-color6.png"/>
          <figcaption class="figure-caption">
          </figcaption>
         </figure>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <pre><code class="python language-python">plt.scatter(data = df, x = 'num_var1', y = 'num_var2', c = 'num_var3',
            cmap = 'mako_r')
plt.colorbar()</code></pre>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <figure class="figure">
          <img alt="" class="img img-fluid" src="img/l5-c03-color7.png"/>
          <figcaption class="figure-caption">
          </figcaption>
         </figure>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <p>
          When using a diverging color palette, you will likely need to specify the "vmin" and "vmax" parameters in order to have the neutral point in the palette meet the center point in the scale. Alternatively, solutions that create a different normalization function like the one posted in
          <a href="https://stackoverflow.com/questions/20144529/shifted-colorbar-matplotlib" rel="noopener noreferrer" target="_blank">
           this Stack Overflow thread
          </a>
          can be used for finer control over the color map. Diverging color scales are common enough for the
          <code>
           heatmap
          </code>
          type that there is a "center" parameter for setting the central value. You'll see a demonstration of this later in the lesson ("Plot Matrices").
         </p>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <h2 id="warnings-on-color">
          Warnings on Color
         </h2>
         <p>
          There are a couple of things to be aware of in general, when working with color. First of all, try and consider color blindness when selecting color for your plots. You don't want your visualization to shut out the 8% of the population that have some kind of color vision deficiency. Fortunately, the built-in color palettes highlighted in the previous section should minimize these concerns. If you use a different, or custom palette, it might be worth checking your visualization's interpretability through a color blindness sim like
          <a href="http://www.color-blindness.com/coblis-color-blindness-simulator/" rel="noopener noreferrer" target="_blank">
           this one
          </a>
          .
         </p>
         <p>
          Secondly, you want to be aware of the effect of transparency and overlap on interpretability. If points of different color on a qualitative scale overlap, the result may be a third color that cannot be matched to something in the palette. If multiple points on a quantitative scale overlap, then the result may be a value that does not actually exist in the data. To be safe here, avoid or minimize transparency in plots with color. You may need to plot only a sample of your points in order to make sure that the effect of the third variable is clearly visible.
         </p>
         <pre><code class="python language-python">plt.figure(figsize = [5,5])

# left: qualitative points
plt.scatter(0,0.5,s = 1e4, c = sb.color_palette()[0], alpha = 0.5)
plt.scatter(0,-0.5,s = 1e4, c = sb.color_palette()[1], alpha = 0.5)

# right: quantitative points
plt.scatter(1,0.5,s = 1e4, c = sb.color_palette('Blues')[2], alpha = 0.5)
plt.scatter(1,-0.5,s = 1e4, c = sb.color_palette('Blues')[4], alpha = 0.5)

# set axes for point overlap
plt.xlim(-0.5,1.5)
plt.ylim(-3.5,3.5)
plt.xticks([])
plt.yticks([])</code></pre>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <figure class="figure">
          <img alt="" class="img img-fluid" src="img/l5-c03-color8.png"/>
          <figcaption class="figure-caption">
          </figcaption>
         </figure>
        </div>
       </div>
       <div class="divider">
       </div>
       <div class="ud-atom">
        <h3>
        </h3>
        <div>
         <h2 id="further-reading">
          Further Reading
         </h2>
         <ul>
          <li>
           Matplotlib tutorial:
           <a href="https://matplotlib.org/tutorials/colors/colormaps.html" rel="noopener noreferrer" target="_blank">
            Colormaps in Matplotlib
           </a>
          </li>
          <li>
           Seaborn tutorial:
           <a href="https://seaborn.pydata.org/tutorial/color_palettes.html" rel="noopener noreferrer" target="_blank">
            Choosing color palettes
           </a>
          </li>
          <li>
           Eager Eyes:
           <a href="https://eagereyes.org/basics/rainbow-color-map" rel="noopener noreferrer" target="_blank">
            How The Rainbow Color Map Misleads
           </a>
           - seaborn will refuse to accept the 'jet' palette string, which corresponds with a rainbow-colored palette that covers the entire range of hues. This, and the next link, will tell you why it's been forbidden.
          </li>
          <li>
           Agile Scientific:
           <a href="https://agilescientific.com/blog/2017/12/14/no-more-rainbows" rel="noopener noreferrer" target="_blank">
            No more rainbows!
           </a>
          </li>
          <li>
           Datawrapper:
           <a href="https://blog.datawrapper.de/how-to-choose-a-color-palette-for-choropleth-maps/" rel="noopener noreferrer" target="_blank">
            How to Choose a Color Palette for Choropleth Maps
           </a>
           - Though this article discusses color in the context of maps and for a specific software tool, it's a useful reference if you want to create a non-linear normalization function.
          </li>
         </ul>
        </div>
       </div>
       <div class="divider">
       </div>
      </div>
      <div class="col-12">
       <p class="text-right">
        <a class="btn btn-outline-primary mt-4" href="04. Encodings Practice.html" role="button">
         Next Concept
        </a>
       </p>
      </div>
     </div>
    </main>
    <footer class="footer">
     <div class="container">
      <div class="row">
       <div class="col-12">
        <p class="text-center">
         udacity2.0 If you need the newest courses Plase add me wechat: udacity6
        </p>
       </div>
      </div>
     </div>
    </footer>
   </div>
  </div>
  <script src="../assets/js/jquery-3.3.1.min.js">
  </script>
  <script src="../assets/js/plyr.polyfilled.min.js">
  </script>
  <script src="../assets/js/bootstrap.min.js">
  </script>
  <script src="../assets/js/jquery.mCustomScrollbar.concat.min.js">
  </script>
  <script src="../assets/js/katex.min.js">
  </script>
  <script>
   // Initialize Plyr video players
    const players = Array.from(document.querySelectorAll('video')).map(p => new Plyr(p));

    // render math equations
    let elMath = document.getElementsByClassName('mathquill');
    for (let i = 0, len = elMath.length; i < len; i += 1) {
      const el = elMath[i];

      katex.render(el.textContent, el, {
        throwOnError: false
      });
    }

    // this hack will make sure Bootstrap tabs work when using Handlebars
    if ($('#question-tabs').length && $('#user-answer-tabs').length) {
      $("#question-tabs a.nav-link").on('click', function () {
        $("#question-tab-contents .tab-pane").hide();
        $($(this).attr("href")).show();
      });
      $("#user-answer-tabs a.nav-link").on('click', function () {
        $("#user-answer-tab-contents .tab-pane").hide();
        $($(this).attr("href")).show();
      });
    } else {
      $("a.nav-link").on('click', function () {
        $(".tab-pane").hide();
        $($(this).attr("href")).show();
      });
    }

    // side bar events
    $(document).ready(function () {
      $("#sidebar").mCustomScrollbar({
        theme: "minimal"
      });

      $('#sidebarCollapse').on('click', function () {
        $('#sidebar, #content').toggleClass('active');
        $('.collapse.in').toggleClass('in');
        $('a[aria-expanded=true]').attr('aria-expanded', 'false');
      });

      // scroll to first video on page loading
      if ($('video').length) {
        $('html,body').animate({ scrollTop: $('div.plyr').prev().offset().top});
      }

      // auto play first video: this may not work with chrome/safari due to autoplay policy
      if (players && players.length > 0) {
        players[0].play();
      }

      // scroll sidebar to current concept
      const currentInSideBar = $( "ul.sidebar-list.components li a:contains('03. Color Palettes')" )
      currentInSideBar.css( "text-decoration", "underline" );
      $("#sidebar").mCustomScrollbar('scrollTo', currentInSideBar);
    });
  </script>
 </body>
</html>
