WEBVTT
Kind: captions
Language: zh-CN

00:00:00.000 --> 00:00:03.089
上节课中 你看到如何在散点图里用

00:00:03.089 --> 00:00:06.424
大小和形状对第三个变量进行编码

00:00:06.424 --> 00:00:12.099
实际上 Matplotlib 和 Seaborn 提供的更方便的编码方式其实是颜色

00:00:12.099 --> 00:00:14.129
对于分类数据 我们可以使用

00:00:14.130 --> 00:00:18.405
Seaborn 的 FacetGrid 函数 将 hue 参数设置为想要绘制的列名

00:00:18.405 --> 00:00:22.919
在 map 函数中 我们传入 regplot 函数以及坐标轴变量

00:00:22.919 --> 00:00:27.490
之后设置其他的 regplot 参数

00:00:27.809 --> 00:00:30.609
让我们来对这个图表进行一些调整

00:00:30.609 --> 00:00:33.869
首先 调整类别数据的绘制顺序

00:00:33.869 --> 00:00:37.254
使手动挡的数据点 绘制在自动挡的数据点上面

00:00:37.255 --> 00:00:41.090
这可以通过 FacetGrid 里的 hue_order 参数来实现

00:00:41.090 --> 00:00:43.640
要注意的是该参数名没有用 order 这个单独的单词

00:00:43.640 --> 00:00:47.270
因为 FacetGrid 也可以在其他维度上设置 order (比如 row_order、col_order)

00:00:47.270 --> 00:00:48.970
因为我们只有一个图表

00:00:48.969 --> 00:00:51.064
所以可以适当地增加图表大小

00:00:51.064 --> 00:00:56.530
将 size 设为4 将 aspect 设为 1.5

00:00:56.530 --> 00:00:58.759
长比宽多两倍多

00:00:58.759 --> 00:01:01.655
最后 我们使用 FacetGrid 对象的 add_legend 方法

00:01:01.655 --> 00:01:04.894
来自动添加图例

00:01:04.894 --> 00:01:07.729
变速器类型属于无序分类变量

00:01:07.730 --> 00:01:10.820
所以默认的分类调色板就很合适

00:01:10.819 --> 00:01:13.884
如果绘制车辆类型呢？

00:01:13.885 --> 00:01:16.310
车辆类型是一个有序变量

00:01:16.310 --> 00:01:19.254
所以分类调色板并不是很适用

00:01:19.254 --> 00:01:22.454
我们应该使用有序调色板

00:01:22.454 --> 00:01:26.034
可以通过 FacetGrid 的 palette 参数进行设置

00:01:26.034 --> 00:01:29.215
可以使用 Matplotlib 的调色板字符串

00:01:29.215 --> 00:01:32.240
在这里 我们使用 viridis_r 调色板

00:01:32.239 --> 00:01:34.875
这个调色板不仅包括颜色的深浅

00:01:34.875 --> 00:01:39.519
而且也包含不同的色调以区分不同类别的变量

00:01:39.519 --> 00:01:43.784
那如果我们现在要绘制数值变量呢？比如二氧化碳的排放量

00:01:43.784 --> 00:01:46.969
这次不能直接在 hue 参数上修改变量名称了

00:01:46.969 --> 00:01:50.765
因为 FacetGrid 函数只针对分类变量

00:01:50.765 --> 00:01:54.590
如果我们这么做了 我们会得到一个很长的而且

00:01:54.590 --> 00:01:58.490
每个单独的数值都占用了一种颜色的图例

00:01:58.489 --> 00:02:03.834
我们应该使用基础 Matplotlib 里面的 scatter函数来绘图

00:02:03.834 --> 00:02:06.289
虽然不是很便捷

00:02:06.290 --> 00:02:08.750
但是设置颜色参数的灵活度提高了

00:02:08.750 --> 00:02:12.110
这是 regplot 函数做不到的

00:02:12.110 --> 00:02:16.550
使用 scatter 函数 只需将在 c 参数中设置第三个数值变量

00:02:16.550 --> 00:02:21.235
在 cmap 参数中设置调色板

00:02:21.235 --> 00:02:25.160
我使用了 colorbar 函数在图表中添加了一个颜色条 

00:02:25.159 --> 00:02:28.599
并且用 label 参数在颜色条上方添加了单位注释

