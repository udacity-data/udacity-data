WEBVTT
Kind: captions
Language: ar

00:00:00.000 --> 00:00:05.575
إن جمع البيانات من ملفات نصية في Python يعني الفتح
والقراءة من الملفات.

00:00:05.575 --> 00:00:07.875
إذا كنت تستخدم Pandas كما نفعل هنا،

00:00:07.875 --> 00:00:13.129
فهذا يعني أيضًا تخزين بيانات النص التي قرأتها للتو
في إطار بيانات Pandas.

00:00:13.130 --> 00:00:17.295
لدينا 88 من أراء Roger Ebert لفتحها وقراءتها.

00:00:17.295 --> 00:00:19.560
سنحتاج إلى تكرارًا حلقيًا للتكرار خلال جميع

00:00:19.559 --> 00:00:22.769
الملفات الموجودة في هذا المجلد لفتح كلًا منها
وقراءته.

00:00:22.769 --> 00:00:25.814
وتوجد طريقتان رئيسيتان للقيام بذلك.

00:00:25.815 --> 00:00:30.789
الأولى باستخدام مكتبة OS والأخرى باستخدام مكتبة تسمى
glob.

00:00:30.789 --> 00:00:35.089
لقد كنا نستخدم os.listdir في هذا الدرس حتى الآن.

00:00:35.090 --> 00:00:36.935
وهذا أمر جيد إذا كنت متأكدًا من رغبتك في فتح

00:00:36.935 --> 00:00:39.395
جميع ملفات المجلد، تمامًا كما فعلنا هنا.

00:00:39.395 --> 00:00:43.630
وكل ملف في هذا المجلد هو ملف نصي لمراجعة Roger
Ebert.

00:00:43.630 --> 00:00:47.100
ولكن دعنا نبدله هنا ونستخدم مكتبة glob بدلًا منه.

00:00:47.100 --> 00:00:52.395
تسمح مكتبة glob بتوسيع نمط اسم مسار نمط Unix،

00:00:52.395 --> 00:00:53.825
وهي طريقة رائعة حقًا للقول بأن

00:00:53.825 --> 00:00:59.780
استخدام شيء يسمى أنماط glob لتحديد مجموعات من أسماء
الملفات.

00:00:59.780 --> 00:01:03.725
وتستخدم أنماط glob هذه ما يدعى حروف البدل.

00:01:03.725 --> 00:01:08.540
إن التعرّف على التوثيق ومراجعته هكذا قد يكون أمرًا
معقدًا،

00:01:08.540 --> 00:01:15.032
لذا أريد منكم فقط التركيز على هذا الشيء هنا الآن
فقط، glob.glob.

00:01:15.031 --> 00:01:19.099
ينتُج عن هذا قائمة اسم المسار الذي يطابق اسم المسار،
على سبيل المثال.

00:01:19.099 --> 00:01:21.579
معلمة السلسلة التي تمررها هنا،

00:01:21.579 --> 00:01:24.239
هي المكان الذي ينتقل إليه نمط glob.

00:01:24.239 --> 00:01:25.719
كيف يمكننا استخدام ذلك؟

00:01:25.719 --> 00:01:28.000
نريد جميع أسماء الملفات التي تنتهي بـ.txt،

00:01:28.000 --> 00:01:31.844
وهي تمثل جميع الملفات الموجودة في مجلد مراجعات
Ebert.

00:01:31.844 --> 00:01:34.929
ولأن glob.glob تقوم بإرجاع قائمة،

00:01:34.930 --> 00:01:37.565
يمكننا إجراء التكرار الحلقي من خلال ذلك مباشرةً
هنا.

00:01:37.564 --> 00:01:40.459
وإليك هذا البدل في نمط glob.

00:01:40.459 --> 00:01:43.143
كل الملفات الموجودة داخل المجلد، ebert_reviews،

00:01:43.144 --> 00:01:46.792
ثم كل ملف ينتهي بـ .txt.

00:01:46.792 --> 00:01:51.840
هذه النجمة تعني تطابق أي سلسلة بأي طول.

00:01:51.840 --> 00:01:55.719
دعونا فقط نطبع المسارات إلى جميع هذه الملفات هنا
باستخدام glob.

00:01:55.719 --> 00:01:57.924
ويمكنك تخيل مدى فائدة هذا إذا لم يكن كل ملف

00:01:57.924 --> 00:02:01.524
 في هذا المجلد قد انتهى بـ txt، على سبيل المثال.

00:02:01.525 --> 00:02:07.440
يمكنك تمرير هذا المسار بالكامل إلى كل ملف داخل دالة
open في Python.

00:02:07.439 --> 00:02:11.597
بينما كنا نفتح ملفات كهذا، من خلال open،

00:02:11.598 --> 00:02:13.480
ثم تمرير المسار إلى الملف، ثم،

00:02:13.479 --> 00:02:16.514
as file، أو أي مؤشر ملف قمت باستخدامه.

00:02:16.514 --> 00:02:19.282
في Python 3، عند فتح النص للقراءة،

00:02:19.282 --> 00:02:22.709
يجب عليك دائمًا استخدام open مع ترميز محدد،

00:02:22.710 --> 00:02:25.849
وهو ما يأتي بعد معلمة الترميز هذه.

00:02:25.849 --> 00:02:29.039
ويعني ذلك أن تحصل على فك تشفير Unicode بشكل صحيح،

00:02:29.039 --> 00:02:30.824
أو خطأ مباشرة على الفور،

00:02:30.824 --> 00:02:33.354
مما يجعل الأمر أسهل بكثير في debug.

00:02:33.354 --> 00:02:36.509
ومرة أخرى، لم نقم بذلك في وقت سابق من الدرس لأنني
لم أرغب

00:02:36.509 --> 00:02:39.983
في إرباككم بمعلومات عن عمليات الترميز،

00:02:39.983 --> 00:02:41.245
ولكن حان الآن وقت البدء.

00:02:41.245 --> 00:02:44.879
ومن الآن فصاعدًا، يجب أن تكون جميع الأكواد الافتتاحية
كالتالي.

00:02:44.879 --> 00:02:46.694
ما الترميز الفعلي؟

00:02:46.694 --> 00:02:49.164
يعتمد هذا على مصدر النص.

00:02:49.164 --> 00:02:54.234
دعونا نستخدم مراجعة Roger Ebert لفيلم الدار البيضاء
كمثال عملي.

00:02:54.235 --> 00:02:55.950
ولكن ضعوا في اعتباركم أن هذا ينطبق على جميع

00:02:55.949 --> 00:02:58.185
هذه الملفات لأنها جميعًا من نفس موقع الويب.

00:02:58.185 --> 00:03:00.180
إذا فحصنا مصدر هذه الصفحة،

00:03:00.180 --> 00:03:03.165
وهو ما يمكنك فعله في المستعرضات المختلفة بالنقر بزر
الماوس الأيمن

00:03:03.164 --> 00:03:06.810
وتحديد View page source أو شيء من هذا القبيل،

00:03:06.810 --> 00:03:10.569
وستجد أن الترميز هنا هو utf-8.

00:03:10.569 --> 00:03:15.174
هذا رائع. دعونا نفتح الملف النصي لهذا الفيلم، الدار
البيضاء.

00:03:15.175 --> 00:03:19.650
في الواقع، لا نريد جميع بيانات النص هذه في حزمة
واحدة كبيرة،

00:03:19.650 --> 00:03:22.134
وهو ما يمكن القيام به على النحو التالي،

00:03:22.133 --> 00:03:25.589
file.read، الذي يمكّننا من التحقق من أحد الملفات
في

00:03:25.590 --> 00:03:30.224
تكرار glob الحلقي مع عبارة طباعة ثم تقسيم التكرار
الحلقي.

00:03:30.224 --> 00:03:33.134
يوجد الملف Wizard of Oz بالكامل،

00:03:33.134 --> 00:03:35.509
وهو أول ملف في المجلد.

00:03:35.509 --> 00:03:38.074
بدلًا من ذلك، نريد السطر الأول، a.k.a.

00:03:38.074 --> 00:03:40.675
عنوان الفيلم، السطر الثاني، a.k.a.

00:03:40.675 --> 00:03:45.609
عنوان URL ثم كل شيء بدءًا من السطر الثالث فصاعدًا،
a.k.a.

00:03:45.610 --> 00:03:49.445
نص المراجعة، كأجزاء منفصلة من البيانات،

00:03:49.444 --> 00:03:52.114
لذلك لا يمكننا استخدام file.read فقط.

00:03:52.115 --> 00:03:53.700
بما أن ملفات النص مفصولة

00:03:53.699 --> 00:03:58.769
بحروف السطر الجديد وكائن الملف الذي يتم إرجاعه من
خلال open،

00:03:58.770 --> 00:04:01.020
as file، بمثابة مُكرَّر،

00:04:01.020 --> 00:04:03.675
يمكننا قراءة الملف سطرًا بسطر.

00:04:03.675 --> 00:04:05.855
وإذا كنت تريد قراءة سطر واحد،

00:04:05.854 --> 00:04:10.704
 يمكنك استخدام readline، مثل، file.readline.

00:04:10.705 --> 00:04:14.235
والآن دعونا نتحقق من ذلك باستخدام استراتيجية الطباعة
والتقسيم مرة أخرى.

00:04:14.235 --> 00:04:17.585
يوجد عنوان الفيلم على السطر الأول من الملف،

00:04:17.584 --> 00:04:19.859
وهو في الواقع جزء من المساحة البيضاء أدناه،

00:04:19.860 --> 00:04:22.759
وهي في الواقع \n،

00:04:22.759 --> 00:04:24.649
أو حرف السطر الجديد.

00:04:24.649 --> 00:04:27.764
يمكننا التخلص من ذلك عن طريق تحليلها في نهاية هذه
السلسلة.

00:04:27.764 --> 00:04:30.639
وها نحن ذا، حصلنا على عنوان الفيلم.

00:04:30.639 --> 00:04:34.300
وبعد ذلك، ستحصل على عنوان URL ونص المراجعة
بالكامل.

00:04:34.300 --> 00:04:39.125
ولكن قبل ذلك، تذكر أننا نريد جميع هذه البيانات في
إطار بيانات Pandas،

00:04:39.125 --> 00:04:40.697
لذا نحتاج إلى إنشاء واحد.

00:04:40.697 --> 00:04:44.060
إن الطريقة الأكثر كفاءة حسابيًا للقيام بذلك هي أولاً
إنشاء

00:04:44.060 --> 00:04:49.459
قائمة فارغة ثم ملء تلك القائمة واحدة تلو الأخرى
أثناء قيامنا بالتكرار خلال هذا التكرار الحلقي،

00:04:49.459 --> 00:04:51.834
 وسنقوم بملء هذه القائمة بالقواميس.

00:04:51.834 --> 00:04:56.060
وسيتم لاحقاً تحويل قائمة القواميس هذه إلى إطار بيانات
Pandas،

00:04:56.060 --> 00:04:59.009
في وقت واحد، بمجرد تجميع كل البيانات.

00:04:59.009 --> 00:05:02.629
حان دورك الآن. مهمتك هي الحصول على عنوان URL
للمراجعة،

00:05:02.629 --> 00:05:05.029
والنص الكامل للمراجعة

00:05:05.029 --> 00:05:08.159
ثم إلحاقه بقائمة القواميس.

