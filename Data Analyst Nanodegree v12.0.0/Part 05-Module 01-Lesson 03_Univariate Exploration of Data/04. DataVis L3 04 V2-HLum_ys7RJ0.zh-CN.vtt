WEBVTT
Kind: captions
Language: zh-CN

00:00:00.000 --> 00:00:04.480
上个视频中 我们为宝可梦的第一属性绘制了柱状图

00:00:04.480 --> 00:00:07.220
这里我对数据进行了整理 创建了一个 新的 DataFrame 

00:00:07.219 --> 00:00:10.349
把两种属性都放入了同一列数据中

00:00:10.349 --> 00:00:14.089
我还创建了一些变量 按频率大小排列了属性

00:00:14.089 --> 00:00:16.589
并将数量统计结果绘制成条形图

00:00:16.589 --> 00:00:18.589
现在我想知道

00:00:18.589 --> 00:00:21.629
各属性的宝可梦占比

00:00:21.629 --> 00:00:23.869
虽然知道宝可梦总数后

00:00:23.870 --> 00:00:26.245
可以根据这张图进行估算

00:00:26.245 --> 00:00:29.644
但如果直接把占比可视化出来 可能会直观很多

00:00:29.644 --> 00:00:32.539
为此 我们可以

00:00:32.539 --> 00:00:36.575
用 Matplotlib 将轴刻度从绝对计数改为相对计数

00:00:36.575 --> 00:00:39.890
首先 让我们创建刻度位置列表

00:00:39.890 --> 00:00:44.155
为此 我们要先把最长条形的长度转为百分比

00:00:44.155 --> 00:00:47.425
因此 我们用原始 DataFrame pokemon 求出分母

00:00:47.424 --> 00:00:50.250
然后用数量统计值作分子

00:00:50.250 --> 00:00:53.219
现在 用 NumPy 函数 arange

00:00:53.219 --> 00:00:55.839
生成一个等差比值列表

00:00:55.840 --> 00:00:58.615
在 0 和最大值之间 步长为 2%

00:00:58.615 --> 00:01:02.240
将这个数值赋给变量 tick_props

00:01:02.240 --> 00:01:05.070
我还用了列表推导式

00:01:05.069 --> 00:01:09.064
创建了另一个变量 tick_names 做为刻度标签

00:01:09.064 --> 00:01:13.424
这些字符串会以两位小数的形式表示百分比

00:01:13.424 --> 00:01:15.905
现在我们可以修改图表了

00:01:15.905 --> 00:01:18.170
要修改刻度标签的位置

00:01:18.170 --> 00:01:20.875
就用 Matplotlib 的函数 xticks

00:01:20.875 --> 00:01:23.555
要设置的第一个参数是刻度位置

00:01:23.555 --> 00:01:25.900
由于现在数量统计仍是绝对值

00:01:25.900 --> 00:01:30.734
所以要让刻度百分比 tick_props 乘以 n_pokemon 从而获取正确的刻度位置

00:01:30.734 --> 00:01:33.129
第二个参数是刻度标签

00:01:33.129 --> 00:01:35.099
这里两个参数都要输入

00:01:35.099 --> 00:01:37.989
因为刻度位置和值是不同的

00:01:37.989 --> 00:01:43.409
最后 用函数 xlabel 把 x 轴标签从默认的 count     

00:01:43.409 --> 00:01:45.795
改为更恰当的 proportion     

00:01:45.795 --> 00:01:49.960
从修改后的条形图可知 水属性约占 16%

00:01:49.959 --> 00:01:54.799
冰属性占 4% 等等

00:01:54.799 --> 00:01:58.625
我们也可以让横轴表示数量统计

00:01:58.625 --> 00:02:01.045
然后在条形上用文本标出百分比

00:02:01.045 --> 00:02:04.504
此时 Matplotlib 的灵活性就凸显出来了

00:02:04.504 --> 00:02:08.424
我们可以用一个循环逐个放置文本元素

00:02:08.425 --> 00:02:11.740
函数 text 的第一个参数是 x 的位置

00:02:11.740 --> 00:02:13.675
就在条形末端

00:02:13.675 --> 00:02:16.035
第二个参数是 y 的位置

00:02:16.034 --> 00:02:18.819
从 0 开始 随着循环逐渐增量

00:02:18.819 --> 00:02:22.905
第三个参数是要输出的字符串 即百分比

00:02:22.905 --> 00:02:26.125
最后 我还要加一个可选参数 va

00:02:26.125 --> 00:02:30.574
使每个条形的文本垂直居中对齐

00:02:30.574 --> 00:02:33.530
最终效果如图

