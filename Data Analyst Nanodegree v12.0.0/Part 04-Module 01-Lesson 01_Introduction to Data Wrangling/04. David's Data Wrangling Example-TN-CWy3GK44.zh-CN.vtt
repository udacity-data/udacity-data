WEBVTT
Kind: captions
Language: zh-CN

00:00:00.000 --> 00:00:02.879
我有一次难忘的数据整理经历

00:00:02.879 --> 00:00:05.625
我给曲棍球博客写了一篇文章

00:00:05.625 --> 00:00:10.394
我的曲棍球玩得很烂 但我是一个分析极客和多伦多枫叶队超级粉丝

00:00:10.394 --> 00:00:12.000
枫叶队在很长时间内

00:00:12.000 --> 00:00:14.054
表现得很差劲

00:00:14.054 --> 00:00:16.945
有多烂呢？去年联盟垫底

00:00:16.945 --> 00:00:21.260
但从本赛季开始 他们突然疯狂得分

00:00:21.260 --> 00:00:25.575
我很好奇 枫叶队是历史上进步最大的球队吗？

00:00:25.574 --> 00:00:29.384
我需要用数据来回答 它们主要分布在三个不同的数据集中

00:00:29.385 --> 00:00:32.760
因为编制数据的人员没有安排好

00:00:32.759 --> 00:00:34.184
你马上就会明白我为何这样说

00:00:34.185 --> 00:00:37.920
因为那样的编排导致本项目的数据整理变得尤为复杂

00:00:37.920 --> 00:00:40.980
所以 我的工作从下载三个数据文件开始

00:00:40.979 --> 00:00:44.619
第一个 第二个

00:00:44.619 --> 00:00:47.269
第三个也下载好了

00:00:47.270 --> 00:00:50.109
每个文件都包含了

00:00:50.109 --> 00:00:54.365
每队得分或被得分的表现

00:00:54.365 --> 00:00:58.984
大部分列标题看上去毫无意义 但没关系

00:00:58.984 --> 00:01:02.640
对此 我会在此阐述你需知的部分

00:01:02.640 --> 00:01:05.519
导入数据后 我开始评估

00:01:05.519 --> 00:01:08.259
这些数据集有很大不同

00:01:08.260 --> 00:01:11.855
第一个在这里 这是第二个 这是第三个

00:01:11.855 --> 00:01:14.035
第一个数据集和第三个数据集的数据

00:01:14.034 --> 00:01:16.869
按赛季 (season) 划分

00:01:16.870 --> 00:01:19.885
中间的数据由比赛场次 (game) 划分

00:01:19.885 --> 00:01:24.245
开始分析之前 我准备对这些数据做标准化处理

00:01:24.245 --> 00:01:26.135
然后 我注意到了这两个数据集

00:01:26.135 --> 00:01:30.670
第二个和第三个数据集含有单次总得分

00:01:30.670 --> 00:01:34.015
第一个数据集含有进球率统计数据

00:01:34.015 --> 00:01:36.939
即比赛中每小时进球数

00:01:36.939 --> 00:01:39.685
正如每小时英里数/公里数

00:01:39.685 --> 00:01:42.502
在线营销点击率或

00:01:42.501 --> 00:01:44.109
每次访问点击次数

00:01:44.109 --> 00:01:46.510
赛队的比赛时间有些许不同

00:01:46.510 --> 00:01:50.770
根据总分判断进球能力不太公平

00:01:50.769 --> 00:01:55.099
总分 VS 进球率在数据整理过程中较为常见

00:01:55.099 --> 00:01:57.219
得出我想要的进球率统计数据 (进球数/小时)

00:01:57.219 --> 00:01:59.920
要用每支球队总进球数除以

00:01:59.920 --> 00:02:03.215
比赛总时长

00:02:03.215 --> 00:02:05.130
上场分钟数也被称为冰上时间

00:02:05.129 --> 00:02:06.539
简称是 TOI

00:02:06.540 --> 00:02:08.830
这两个数据集都有 TOI 数据

00:02:08.830 --> 00:02:11.605
表一表二中有 但这个表上没有记录

00:02:11.604 --> 00:02:14.409
什么？ 此时我停了下来

00:02:14.409 --> 00:02:16.539
当我初次开始整理数据时

00:02:16.539 --> 00:02:19.179
连续发现诸如此类的一些问题 让我感到压力巨大

00:02:19.180 --> 00:02:22.985
我有太多的事要做 感觉永远都做不完

00:02:22.985 --> 00:02:25.315
我所知的方法是 如果把每个问题都写下来

00:02:25.314 --> 00:02:28.629
停一会儿 揣摩你要做的事

00:02:28.629 --> 00:02:34.055
整理工作就变得让人感到快乐 像是一个执行任务的侦探在有条不紊地解开谜题

00:02:34.055 --> 00:02:37.875
所以 我停下来写下问题 深呼吸

00:02:37.875 --> 00:02:41.944
然而 我必须填写出第三个数据集的冰上时间数据

00:02:41.944 --> 00:02:44.275
没有可以轻易下载的参考资料

00:02:44.275 --> 00:02:47.414
我必须从不同曲棍球统计网站上把数据采集下来

00:02:47.414 --> 00:02:49.060
这就是 TOI 列

00:02:49.060 --> 00:02:51.860
TOI 代表冰上时间

00:02:51.860 --> 00:02:57.820
该网站记录了几个赛季的数据 并按各支队伍划分

00:02:57.819 --> 00:02:59.560
采集数据只是

00:02:59.560 --> 00:03:02.455
用代码从网站上提取数据的一种漂亮说法

00:03:02.455 --> 00:03:04.075
但在这里我不会展示如何操作

00:03:04.074 --> 00:03:06.310
但它是很方便的技巧且相当神奇

00:03:06.310 --> 00:03:10.270
其实我们会在本课第二节中更详细地讲述

00:03:10.270 --> 00:03:14.310
现在我们从采集来的数据中得到了缺少的 TOI 数据

00:03:14.310 --> 00:03:18.110
但采集的数据以字符串形式存在

00:03:18.110 --> 00:03:20.430
而我需要整数进行乘除

00:03:20.430 --> 00:03:22.920
以创建前面讨论过的进球率统计数据

00:03:22.919 --> 00:03:25.109
即每小时进球数

00:03:25.110 --> 00:03:28.635
所以 将字符串转换成整数很有必要

00:03:28.634 --> 00:03:30.745
这并不难 我们能做到

00:03:30.745 --> 00:03:34.140
然而 我注意到采集的数据有更多问题

00:03:34.139 --> 00:03:37.000
我们下载的前三个数据集

00:03:37.000 --> 00:03:40.284
都包含了每个赛队的缩写名称

00:03:40.284 --> 00:03:43.530
例如 BOS 代表波斯顿队、PIT 代表匹兹堡队、

00:03:43.530 --> 00:03:45.675
TOR 代表多伦多队

00:03:45.675 --> 00:03:48.778
但是采集的数据包含的是完整队名

00:03:48.777 --> 00:03:53.736
即波斯顿 (Boston)、匹兹堡 (Pittsburgh) 和多伦多 (Toronto)

00:03:53.736 --> 00:03:58.409
需要将这些名称进行标准化 或在 TOI 数据中合并缺失的每队冰上时间数据

00:03:58.409 --> 00:04:00.509
另外还有一些问题

00:04:00.509 --> 00:04:03.269
要回答这个问题 需要清理的数据还有很多

00:04:03.270 --> 00:04:06.870
我现在不会马上讨论 但你要明白这一点

00:04:06.870 --> 00:04:10.605
当数据来源较多时 容易形成脏数据

00:04:10.604 --> 00:04:15.209
要找到和修复所有这些问题 有必要评估这里的数据

00:04:15.210 --> 00:04:19.612
评估一完成 我会写出一切所需的清理代码 以解决这些问题

00:04:19.612 --> 00:04:24.985
然后 执行一次计算 完成分析部分

00:04:24.985 --> 00:04:30.338
剩下的工作是创建可视化内容并写成文章

00:04:30.338 --> 00:04:32.529
前面那些工作值得吗？

00:04:32.529 --> 00:04:34.094
扮演数据侦探的角色很有趣

00:04:34.095 --> 00:04:36.390
答案是肯定的

00:04:36.389 --> 00:04:38.069
我的预感是对的

00:04:38.069 --> 00:04:41.564
就得分能力而言

00:04:41.564 --> 00:04:43.594
枫叶队是截止当时进步最快的球队

00:04:43.595 --> 00:04:47.750
当完成表格分类 看到枫叶队排名榜首 我直接从座位上跳了起来

00:04:47.750 --> 00:04:53.170
坡度图和柱状图表现得更清晰

